(()=>{"use strict";var e,t,a={};a.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),(()=>{var e;a.g.importScripts&&(e=a.g.location+"");var t=a.g.document;if(!e&&t&&(t.currentScript&&(e=t.currentScript.src),!e)){var o=t.getElementsByTagName("script");o.length&&(e=o[o.length-1].src)}if(!e)throw new Error("Automatic publicPath is not supported in this browser");e=e.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),a.p=e})(),(t=e||(e={})).P2BitIndexed="2-bit (4 color) Indexed",t.P4BitRGBI="4-bit (16 color) RGBI",t.P4BitIndexed="4-bit (16 color) Indexed",t.PMono="Monochrome",t.PRGB="RGB",t.PAuto="Optimized (Auto)",t.POther="Other";const o=e,n={name:"CGA Mode 4 Palette 0 (low)",type:o.P2BitIndexed,useAlpha:!1,data:[[0,0,0],[0,170,0],[170,0,0],[170,85,0]]},r={name:"CGA Mode 4 Palette 0 (high)",type:o.P2BitIndexed,useAlpha:!1,data:[[0,0,0],[85,255,85],[255,85,85],[255,255,85]]},s={name:"CGA Mode 4 Palette 1 (low)",type:o.P2BitIndexed,useAlpha:!1,data:[[0,0,0],[0,170,170],[170,0,170],[170,170,170]]},i={name:"CGA Mode 4 Palette 1 (high)",type:o.P2BitIndexed,useAlpha:!1,data:[[0,0,0],[85,255,255],[255,85,255],[255,255,255]]},l={name:"CGA Mode 5 (low)",type:o.P2BitIndexed,useAlpha:!1,data:[[0,0,0],[0,170,170],[170,0,0],[170,170,170]]},d={name:"CGA Mode 5 (high)",type:o.P2BitIndexed,useAlpha:!1,data:[[0,0,0],[85,255,255],[255,85,85],[255,255,255]]},c={name:"CGA 4-bit RGBI (IBM)",type:o.P4BitRGBI,useAlpha:!1,data:[[0,0,0],[0,0,170],[0,170,0],[0,170,170],[170,0,0],[170,0,170],[170,85,0],[170,170,170],[85,85,85],[85,85,255],[85,255,85],[85,255,255],[255,85,85],[255,85,255],[255,255,85],[255,255,255]]},h={name:"Commodore 64",type:o.P4BitIndexed,useAlpha:!1,data:[[0,0,0],[98,98,82],[137,137,137],[173,173,173],[255,255,255],[159,78,68],[203,126,117],[109,84,18],[161,104,60],[201,212,135],[154,226,155],[92,171,94],[106,191,198],[136,126,203],[80,69,155],[160,87,163]]},p={name:"Windows 4-bit RGBI",type:o.P4BitRGBI,useAlpha:!1,data:[[0,0,0],[0,0,128],[0,128,0],[0,128,128],[128,0,0],[128,0,128],[128,128,0],[192,192,192],[128,128,128],[0,0,255],[0,255,0],[0,255,255],[255,0,0],[255,0,255],[255,255,0],[255,255,255]]},u={name:"Windows 20-color Extended RGBI",type:o.P4BitIndexed,useAlpha:!1,data:[[0,0,0],[0,0,128],[0,128,0],[0,128,128],[128,0,0],[128,0,128],[128,128,0],[192,192,192],[192,220,192],[166,202,240],[255,251,240],[160,160,164],[128,128,128],[0,0,255],[0,255,0],[0,255,255],[255,0,0],[255,0,255],[255,255,0],[255,255,255]]},m={name:"ZX Spectrum 4-bit RGBI",type:o.P4BitRGBI,useAlpha:!1,data:[[0,0,0],[0,0,215],[0,215,0],[0,215,215],[215,0,0],[215,0,215],[215,215,0],[215,215,215],[0,0,255],[0,255,0],[0,255,255],[255,0,0],[255,0,255],[255,255,0],[255,255,255]]},g={name:"Game Boy Green (2-bit MC)",type:o.PMono,useAlpha:!1,data:[[15,56,15],[48,98,48],[139,172,15],[155,188,15]]},f={name:"Game Boy White (2-bit MC)",type:o.PMono,useAlpha:!1,data:[[0,0,0],[85,85,85],[170,170,170],[255,255,255]]},y={name:"8-color RGB (3-bit, 1bpc)",type:o.PRGB,useAlpha:!1,data:[[1,1,1]]},w={name:"64-color RGB (6-bit, 2bpc)",type:o.PRGB,useAlpha:!1,data:[[2,2,2]]},v={name:"256-color RGB (8-bit, 3-3-2)",type:o.PRGB,useAlpha:!1,data:[[3,3,2]]},B={name:"Macintosh II (1987)",type:o.P4BitIndexed,useAlpha:!1,data:[[255,255,255],[255,255,0],[255,102,0],[221,0,0],[255,0,153],[51,0,153],[0,0,204],[0,153,255],[0,170,0],[0,102,0],[102,51,0],[153,102,51],[187,187,187],[136,136,136],[68,68,68],[0,0,0]]},E={name:"Auto 16-color (4-bit indexed)",type:o.PAuto,useAlpha:!1,data:[[16,-1,4],[1,0,0]]},P={name:"Auto 64-color (6-bit indexed)",type:o.PAuto,useAlpha:!1,data:[[64,1,5],[1,0,0]]},A={name:"Auto 256-color (8-bit indexed)",type:o.PAuto,useAlpha:!1,data:[[256,2,5],[1,0,0]]},x={name:"Black/White (1-bit MC)",type:o.PMono,useAlpha:!1,data:[[0,0,0],[255,255,255]]},b={name:"Black/Green (1-bit MC)",type:o.PMono,useAlpha:!1,data:[[0,0,0],[0,255,0]]},C={name:"Black/Amber (1-bit MC)",type:o.PMono,useAlpha:!1,data:[[0,0,0],[255,200,15]]};function I(e,t,a){switch(t.type){case o.PRGB:return function(e,t){const a=t.data[0].map((e=>Math.pow(2,e))),o=[...e];for(let t=0;t<3;t++){const n=~~(e[t]/(256/a[t]));o[t]=n*(255/(a[t]-1))}return o}(e,t);default:return function(e,t,a){let o=[],n=Number.POSITIVE_INFINITY;return t.data.forEach((t=>{const r=a(e,t);r<=n&&(o=t,n=r)})),o}(e,t,a)}}const k={id:"ProcBasic",name:"Basic (no dithering)",procFn:(e,t,a,o,n)=>{const r=4*e.width,s=e.width*e.height*4;for(let o=0;o<s;o+=4){const i=I(Array.from(e.data.slice(o,o+4)),t,a);for(let t=0;t<3;t++)e.data[o+t]=i[t];o%(8*r)==0&&n&&n(o,s,e)}return e},maxAllowedPaletteSize:65536,supports:{threads:!1,gamma:!1},complexity:e=>e},M={id:"ProcFloydSteinberg",name:"Floyd–Steinberg",procFn:(e,t,a,o,n)=>{const r=e.width*e.height*4,s=4*e.width;for(let o=0;o<r;o+=4){const i=Array.from(e.data.slice(o,o+4)),l=I(i,t,a);for(let t=0;t<3;t++)e.data[o+t]=l[t];const d=i.map(((e,t)=>e-l[t]));for(let t=0;t<3;t++)e.data[o+4+t]+=7*d[t]/16,e.data[o+s-4+t]+=3*d[t]/16,e.data[o+s+t]+=5*d[t]/16,e.data[o+s+4+t]+=1*d[t]/16;o%(4*s)==0&&n&&n(o,r,e)}return e},maxAllowedPaletteSize:65536,supports:{threads:!1,gamma:!0},complexity:e=>e},G=e=>{if(e.type!==o.PRGB)throw new Error("Not an RGB palette");const t=e.data[0].map((e=>Math.pow(2,e))),a={name:"EXPANDED_RGB",type:o.POther,useAlpha:!1,data:[]};for(let e=0;e<t[0];e++)for(let o=0;o<t[1];o++)for(let n=0;n<t[2];n++){const r=[e,o,n],s=[e,o,n];for(let e=0;e<3;e++)s[e]=r[e]*(255/(t[e]-1));a.data.push(s)}return a},L=e=>{switch(e.type){case o.PRGB:return Math.pow(2,e.data[0][0])*Math.pow(2,e.data[0][1])*Math.pow(2,e.data[0][2]);case o.PAuto:return e.data[0][0];default:return e.data.length}},R=[0,48,12,60,3,51,15,63,32,16,44,28,35,19,47,31,8,56,4,52,11,59,7,55,40,24,36,20,43,27,39,23,2,50,14,62,1,49,13,61,34,18,46,30,33,17,45,29,10,58,6,54,9,57,5,53,42,26,38,22,41,25,37,21].map((e=>e/64));function T(e,t,a,o,n){return n(e,t)+a*((o<0?-o:o)+.5)}function S(e=!0){return(t,a,n,r,s)=>{a.type===o.PRGB&&(a=G(a));const i=t.width*t.height*4,l=4*t.width,d={};for(let e=0;e<a.data.length;e++)for(let t=e;t<a.data.length;t++)d[e*a.data.length+t]=.1*n(a.data[e],a.data[t]);const c=[0,0,0];let h,p,u,m;for(let o=0;o<i;o+=4){h=Array.from(t.data.slice(o,o+4));const r=R[o%l/4%8+~~(o/l)%8*8];m={color1:[0,0,0],color2:h,ratio:.33};let g=Number.MAX_VALUE;for(let t=0;t<a.data.length;t++)for(let o=t;o<a.data.length;o++)if(p=a.data[t],u=a.data[o],e){let e=32;t!==o&&(e=((p[0]!==u[0]?19136*(h[0]-p[0])/(u[0]-p[0]):0)+(p[1]!==u[1]?37568*(h[1]-p[1])/(u[1]-p[1]):0)+(p[2]!==u[2]?7296*(h[2]-p[2])/(u[2]-p[2]):0))/((p[0]!==u[0]?299:0)+(p[1]!==u[1]?587:0)+(p[2]!==u[2]?114:0)),e<0?e=0:e>63&&(e=63),e=~~e);const r=e/64;for(let e=0;e<3;e++)c[e]=p[e]+r*(u[e]-p[e]);const s=T(h,c,d[t*a.data.length+o],r-.5,n);s<g&&(g=s,m.color1=p,m.color2=u,m.ratio=r)}else for(let e=0;e<64&&!(t===o&&e>0);e++){const r=e/64;for(let e=0;e<3;e++)c[e]=p[e]+r*(u[e]-p[e]);const s=T(h,c,d[t*a.data.length+o],r-.5,n);s<g&&(g=s,m.color1=p,m.color2=u,m.ratio=r)}for(let e=0;e<3;e++)t.data[o+e]=r<m.ratio?m.color2[e]:m.color1[e];o%(4*l)==0&&s&&s(o,i,t)}return t}}const $={id:"ProcBayerLikeFast",name:"Ordered (Bayer-like) – Fast",procFn:S(),maxAllowedPaletteSize:192,supports:{threads:!0,gamma:!1},complexity:e=>e*e/2},N={id:"ProcBayerLikeThorough",name:"Ordered (Bayer-like) – High Quality",procFn:S(!1),maxAllowedPaletteSize:24,supports:{threads:!0,gamma:!1},complexity:e=>e*e*32},O=[0,48,12,60,3,51,15,63,32,16,44,28,35,19,47,31,8,56,4,52,11,59,7,55,40,24,36,20,43,27,39,23,2,50,14,62,1,49,13,61,34,18,46,30,33,17,45,29,10,58,6,54,9,57,5,53,42,26,38,22,41,25,37,21].map((e=>e/64)),D={id:"ProcWeightedColorMap",name:"Ordered (Weighted Color Map)",procFn:(e,t,a,o,n)=>{const r=1/2.2,s=e.width*e.height*4,i=4*e.width,l=[];let d,c,h,p;const u=t.data.map((e=>299*e[0]+587*e[0]+114*e[0])),m=o.gamma?t.data.map((e=>e.map((e=>Math.pow(e/255,2.2))))):[];for(let g=0;g<s;g+=4){d=Array.from(e.data.slice(g,g+4));const f=g%i/4,y=~~(g/i);for(l.splice(0),h=[0,0,0];l.length<16;){let e=0,n=1,s=Number.MAX_VALUE;const i=l.length||1;for(let u=0;u<t.data.length;u++){c=(o.gamma?m:t.data)[u];for(let t=1;t<=i;t*=2){p=o.gamma?h.map(((e,a)=>255*Math.pow((e+c[a]*t)/(l.length+t),r))):h.map(((e,a)=>(e+c[a]*t)/(l.length+t)),r);const i=a(p,d);i<s&&(n=t,e=u,s=i)}}for(let t=0;t<n;t++)l.push(e);h=h.map(((a,r)=>a+(o.gamma?m:t.data)[e][r]*n))}l.sort(((e,t)=>u[e]-u[t]));const w=~~(O[f%8+y%8*8]*l.length);for(let a=0;a<3;a++)e.data[g+a]=t.data[l[w]][a];g%(4*i)==0&&n&&n(g,s,e)}return e},maxAllowedPaletteSize:256,supports:{threads:!0,gamma:!0},complexity:e=>384*e};class F{constructor(e){var t;this.generated=!1,this.levels=e.levels,this.tree=(t=e.levels,Array.from({length:Math.pow(8,t)},(()=>new class{constructor(){this.colors=[],this.pixels=0}get pixelCount(){return this.pixels}get avgColor(){const e=[0,0,0];for(let t=0;t<this.colors.length;t++)for(let a=0;a<3;a++)e[a]+=this.colors[t][a];return e.map((e=>e/this.colors.length))}addColor(e){this.colors.includes(e)||this.colors.push(e),this.pixels++}}))),this.ctes=[],this.reservedLevel=e.reservedLevel,this.nColors=e.numColors,this.k=e.inclThresholdCoeff||1}addColor(e){if(this.generated)throw new Error("Attempting to modify a generated palette");const t=this.index(e);return this.tree[t].addColor(e),t}getPalette(){this.generated||this.generate();const e=[];return this.ctes.forEach((t=>{const a=t.index,o=[0,0,0];for(let e=0;e<t.level;e++)for(let n=2;n>=0;n--){const r=3*(t.level-1-e)+n,s=1<<3*t.level-1>>3*e+(2-n);o[2-n]=o[2-n]<<1|(a&s)>>r}for(let e=t.level;e<8;e++)for(let a=0;a<3;a++)o[a]=o[a]<<1|(e===t.level?1:0);e.push(o)})),console.log(`Built palette with ${e.length} colors`),e}index(e){let t=0;for(let a=0;a<this.levels;a++){const o=7-a;let n=0;for(let t=0;t<3;t++){const r=128>>a;n=n<<1|(e[t]&r)>>o}t=t<<3|n}return t}getNode(e,t){if(t===this.levels)return this.tree[e];const a=[];for(let o=0;o<8;o++)this.isCTE(8*e+o,t+1)||a.push(this.getNode(8*e+o,t+1));return a.filter((e=>e.pixelCount>0)).reduce(((e,t)=>({pixelCount:e.pixelCount+t.pixelCount})),{pixelCount:0})}isCTE(e,t){return this.ctes.some((a=>a.index===e&&a.level===t))}markCTE(e,t,a){this.ctes.push({index:e,level:t,node:a})}testNode(e,t,a,o){const n=e-t-this.ctes.length,r=(a-this.ctes.map((e=>e.node.pixelCount)).reduce(((e,t)=>e+t),0))/n*this.k;return o.pixelCount>r}get nonReservedCTEs(){return this.ctes.filter((e=>e.level!==this.reservedLevel)).length}generate(){if(this.generated)throw new Error("This palette has already been generated");this.generated=!0;const e=this.reservedLevel<0?0:Math.pow(8,this.reservedLevel),t=this.getNode(0,0).pixelCount;let a,o=0,n=0;for(;this.nColors-e-this.nonReservedCTEs>0;){for(a=this.levels;a>this.reservedLevel&&a>0;){const o=Math.pow(8,a);for(let n=0;n<o;n++){const o=this.getNode(n,a);if(!this.isCTE(n,a)&&this.testNode(this.nColors,e,t,o)&&this.markCTE(n,a,o),n%8==7){let e=0;for(let t=n-7;t<=n;t++)this.isCTE(t,a)&&e++;if(e>0&&e<8){const e=n>>3;this.isCTE(e,a-1)||this.markCTE(e,a-1,this.getNode(e,a-1))}}if(this.nColors-e-this.nonReservedCTEs<=0)break}if(this.nColors-e-this.nonReservedCTEs<=0)break;a--}if(this.ctes.length===o&&(this.k=this.k/2,n++,n>=5))break;o=this.ctes.length}if(this.reservedLevel>=0){a=this.reservedLevel;const e=Math.pow(8,a);for(let t=0;t<e;t++){const e=this.getNode(t,a);this.isCTE(t,a)||this.markCTE(t,a,e)}}}}const W=[];function _(){return new Worker(a.p+"main.worker.js")}var z;!function(e){e[e.Progress=0]="Progress",e[e.Done=1]="Done",e[e.Error=2]="Error"}(z||(z={}));const U=class{constructor(){this.busy=!1,this.x=0,this.y=0,this.worker=new _,this.worker.onmessage=e=>{const t=e.data;switch(t.msg){case z.Progress:this.onprogress&&this.onprogress(Object.assign(Object.assign({},t.params),{partial:t.params.partial?{data:t.params.partial,x:this.x,y:this.y}:void 0}));break;case z.Done:this.onfinish&&this.onfinish({data:t.params.result,x:this.x,y:this.y}),this.busy=!1;break;case z.Error:this.onerror&&this.onerror(t.params.error),this.busy=!1}}}get ready(){return!this.busy}start(e,t,a,o,n){return!this.busy&&(this.busy=!0,this.worker.postMessage({dataIn:e.data,palette:t,procId:a,distFnId:o,features:n}),!0)}terminate(){this.worker.terminate()}},j=navigator.hardwareConcurrency,V=Math.max(~~(j/2),1),X=[];function H(e,t,a,n,r,s){return new Promise(((i,l)=>{t.width=e.width,t.height=e.height;const d=e.getContext("2d");if(!d)throw new Error("Unable to get input context");const c=t.getContext("2d");if(!c)throw new Error("Unable to get output context");let h=(new Date).getTime();const p=d.getImageData(0,0,e.width,e.height);let u;if(a=function(e,t,a){return e.type===o.PAuto?function(e,t){const a=`AUTO_${e.data[0][0]}_${e.data[1][2]}`,n=W.find((e=>e.key===a));if(n)return n.palette;{const n=function(e,t){const a=new F(e),n=t.width*t.height*4;for(let e=0;e<n;e+=4){const o=~~(e/4/t.width);if(~~(e/4%t.width)%2==0&&o%2==0){const o=Array.from(t.data.slice(e,e+4));a.addColor(o)}}const r=a.getPalette();return{name:"__GENERATED__",type:o.POther,useAlpha:!1,data:r}}({numColors:e.data[0][0],reservedLevel:e.data[0][1],levels:e.data[0][2],inclThresholdCoeff:e.data[1][0]},t);return W.push({key:a,palette:n}),n}}(e,a):t.name.includes("Ordered")&&e.type===o.PRGB?G(e):e}(a,n,p),console.log(`Palette processing done in ${(new Date).getTime()-h}ms`),n.supports.threads)if("auto"===s.threads){const t=((e,t)=>e.complexity(L(t)))(n,a),o=e.width*e.height,r=1+~~(o/5e4*t/2048);u=r>V?V:r,console.log(`Want ${r} threads for ${o}px @CR${t}, got ${u} (max ${V})`)}else u=s.threads;else u=1;let m=0;const g=8*~~(e.width/u/8),f=e.width-g*u;h=(new Date).getTime();for(let t=0;t<u;t++){const o=~~(f/8),p=t*g+8*(o<t?o:t),y=g+(t===u-1?f%8:o>t?8:0),w=d.getImageData(p,0,y,e.height);w||l("Unable to get image data from context");const v={data:w,x:p,y:0},B=new U;B.onprogress=e=>{e.partial&&c.putImageData(e.partial.data,p,0),c.fillStyle="#ff00ff",c.fillRect(p,e.current/(4*y),y,2)},B.onfinish=e=>{c.putImageData(e.data,p,0),m--,X.splice(X.indexOf(B),1);const a=(new Date).getTime();console.log(`Worker thread ${t+1} done in ${a-h}ms`),0===m&&(console.log(`${u} worker threads done in ${a-h}ms`),i())},B.onerror=e=>l(`Error in worker thread: ${e}`),console.log(`Starting worker thread ${t+1}/${u} w=${y}`),B.start(v,a,n.id,r,s),m++,X.push(B)}}))}const Q=document.getElementById("canvasOriginal"),Y=document.getElementById("canvasOutput"),Z=document.getElementById("fileInput"),q=document.getElementById("resizeInput"),J=document.getElementById("paletteSelect"),K=document.getElementById("processSelect"),ee=document.getElementById("advancedOptions"),te=document.getElementById("featGamma"),ae=document.getElementById("useLab"),oe=document.getElementById("allowSlow"),ne=document.getElementById("featThreads"),re=document.getElementById("threadModeAuto"),se=document.getElementById("threadModeManual"),ie=document.getElementById("threadCount"),le=document.getElementById("toggleAdvanced"),de=document.getElementById("toggleOriginal"),ce=document.getElementById("abort"),he=document.getElementById("slowWarning"),pe=Q.getContext("2d");oe.addEventListener("change",(function(){oe.checked?he.style.removeProperty("display"):he.style.setProperty("display","none"),ve(),Be()}));const ue=[n,r,s,i,l,d,h,B,p,u,c,m,x,C,b,g,f,y,w,v,E,P,A];let me=p;ue.forEach((e=>{const t=document.createElement("option");let a;t.setAttribute("value",e.name),t.text=e.name;const o=J.getElementsByTagName("optgroup");for(let t=0;t<o.length;t++)o[t].label===e.type&&(a=o[t]);a||(a=document.createElement("optgroup"),a.label=e.type,J.appendChild(a)),a.appendChild(t)})),J.value=me.name;const ge=[k,M,$,N,D];let fe=k;function ye(){re.disabled=!ne.checked,se.disabled=!ne.checked,ie.disabled=!ne.checked||!se.checked}function we(){Y.classList.remove("flash-anim");const e=ne.checked?re.checked?"auto":parseInt(ie.value,10):1;ce.disabled=!1,H(Q,Y,me,fe,ae.checked?"cdLab":"cdRGB",{gamma:te.checked,threads:e}).then((()=>{Y.classList.add("flash-anim"),ce.disabled=!0}))}function ve(){const e=K.children;for(let t=0;t<e.length;t++){const a=e[t],o=ge.find((e=>e.name===a.value));o&&(a.disabled=!oe.checked&&o.maxAllowedPaletteSize<L(me))}}function Be(){const e=J.getElementsByTagName("option");for(let t=0;t<e.length;t++){const a=e[t],o=ue.find((e=>e.name===a.value));o&&(a.disabled=!oe.checked&&fe.maxAllowedPaletteSize<L(o))}}ge.forEach((e=>{const t=document.createElement("option");t.setAttribute("value",e.name),t.text=e.name,K.appendChild(t)})),ae.addEventListener("change",(function(){we()})),J.addEventListener("change",(function(e){me=ue.find((t=>t.name===e.target.value))||me,ve(),we()})),K.addEventListener("change",(function(e){fe=ge.find((t=>t.name===e.target.value))||fe,Be(),we()})),Z.addEventListener("change",(function(e){var t;(t=e,new Promise(((e,a)=>{const o=t.target;if(null==o?void 0:o.files){const t=o.files[0],a=new Image;a.onload=()=>e(a),a.src=URL.createObjectURL(t)}else a()}))).then((e=>function(e){let t=e.width,a=e.height;const o=parseInt(q.value,10);t>=a&&t>o&&(a=o*(a/t),t=o),a>t&&a>o&&(t=o*(t/a),a=o),Q.width=t,Q.height=a,null==pe||pe.drawImage(e,0,0,t,a),W.splice(0),we()}(e)))})),de.addEventListener("click",(function(){Y.classList.contains("clip")?Y.classList.remove("clip"):Y.classList.add("clip")})),le.addEventListener("click",(function(){const e="none"!==getComputedStyle(ee).getPropertyValue("display");e?ee.style.setProperty("display","none"):ee.style.removeProperty("display"),le.innerHTML=(e?"Show":"Hide")+" advanced options"})),ie.value="2",ie.min="1",ie.max=j.toString(),ne.addEventListener("change",ye),re.addEventListener("change",ye),se.addEventListener("change",ye),ie.addEventListener("change",ye),ce.addEventListener("click",(()=>{X.forEach((e=>e.terminate())),X.splice(0),ce.disabled=!0}))})();