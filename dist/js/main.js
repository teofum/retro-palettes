/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
/******/ (() => { // webpackBootstrap
/******/ 	"use strict";
/******/ 	var __webpack_modules__ = ({

/***/ "./src/DitherStyle.ts":
/*!****************************!*\
  !*** ./src/DitherStyle.ts ***!
  \****************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\nvar DitherStyle;\n(function (DitherStyle) {\n    DitherStyle[\"None\"] = \"None\";\n    DitherStyle[\"FloydSteinberg\"] = \"Floyd\\u2013Steinberg\";\n    //Bayer = 'Ordered (Bayer)'\n})(DitherStyle || (DitherStyle = {}));\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (DitherStyle);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9pbWFnZWJpdGRlcHRoLy4vc3JjL0RpdGhlclN0eWxlLnRzPzRlMjAiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7OztBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDLGtDQUFrQztBQUNuQyxpRUFBZSxXQUFXLEVBQUMiLCJmaWxlIjoiLi9zcmMvRGl0aGVyU3R5bGUudHMuanMiLCJzb3VyY2VzQ29udGVudCI6WyJ2YXIgRGl0aGVyU3R5bGU7XG4oZnVuY3Rpb24gKERpdGhlclN0eWxlKSB7XG4gICAgRGl0aGVyU3R5bGVbXCJOb25lXCJdID0gXCJOb25lXCI7XG4gICAgRGl0aGVyU3R5bGVbXCJGbG95ZFN0ZWluYmVyZ1wiXSA9IFwiRmxveWRcXHUyMDEzU3RlaW5iZXJnXCI7XG4gICAgLy9CYXllciA9ICdPcmRlcmVkIChCYXllciknXG59KShEaXRoZXJTdHlsZSB8fCAoRGl0aGVyU3R5bGUgPSB7fSkpO1xuZXhwb3J0IGRlZmF1bHQgRGl0aGVyU3R5bGU7XG4iXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./src/DitherStyle.ts\n");

/***/ }),

/***/ "./src/PaletteGroups.ts":
/*!******************************!*\
  !*** ./src/PaletteGroups.ts ***!
  \******************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\nvar PaletteType;\n(function (PaletteType) {\n    PaletteType[\"P2BitIndexed\"] = \"2-bit (4 color) Indexed\";\n    PaletteType[\"P4BitRGBI\"] = \"4-bit (16 color) RGBI\";\n    PaletteType[\"P4BitIndexed\"] = \"4-bit (16 color) Indexed\";\n    PaletteType[\"PMono\"] = \"Monochrome\";\n    PaletteType[\"PRGB\"] = \"RGB\";\n    PaletteType[\"PAuto\"] = \"Other\";\n    PaletteType[\"POther\"] = \"Other\";\n})(PaletteType || (PaletteType = {}));\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (PaletteType);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9pbWFnZWJpdGRlcHRoLy4vc3JjL1BhbGV0dGVHcm91cHMudHM/ZmI1NSJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7O0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQyxrQ0FBa0M7QUFDbkMsaUVBQWUsV0FBVyxFQUFDIiwiZmlsZSI6Ii4vc3JjL1BhbGV0dGVHcm91cHMudHMuanMiLCJzb3VyY2VzQ29udGVudCI6WyJ2YXIgUGFsZXR0ZVR5cGU7XG4oZnVuY3Rpb24gKFBhbGV0dGVUeXBlKSB7XG4gICAgUGFsZXR0ZVR5cGVbXCJQMkJpdEluZGV4ZWRcIl0gPSBcIjItYml0ICg0IGNvbG9yKSBJbmRleGVkXCI7XG4gICAgUGFsZXR0ZVR5cGVbXCJQNEJpdFJHQklcIl0gPSBcIjQtYml0ICgxNiBjb2xvcikgUkdCSVwiO1xuICAgIFBhbGV0dGVUeXBlW1wiUDRCaXRJbmRleGVkXCJdID0gXCI0LWJpdCAoMTYgY29sb3IpIEluZGV4ZWRcIjtcbiAgICBQYWxldHRlVHlwZVtcIlBNb25vXCJdID0gXCJNb25vY2hyb21lXCI7XG4gICAgUGFsZXR0ZVR5cGVbXCJQUkdCXCJdID0gXCJSR0JcIjtcbiAgICBQYWxldHRlVHlwZVtcIlBBdXRvXCJdID0gXCJPdGhlclwiO1xuICAgIFBhbGV0dGVUeXBlW1wiUE90aGVyXCJdID0gXCJPdGhlclwiO1xufSkoUGFsZXR0ZVR5cGUgfHwgKFBhbGV0dGVUeXBlID0ge30pKTtcbmV4cG9ydCBkZWZhdWx0IFBhbGV0dGVUeXBlO1xuIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./src/PaletteGroups.ts\n");

/***/ }),

/***/ "./src/index.ts":
/*!**********************!*\
  !*** ./src/index.ts ***!
  \**********************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _palette_CGA2bModes__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./palette/CGA2bModes */ \"./src/palette/CGA2bModes.ts\");\n/* harmony import */ var _palette_CGA4bRGBI__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./palette/CGA4bRGBI */ \"./src/palette/CGA4bRGBI.ts\");\n/* harmony import */ var _palette_Cmdr644b__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./palette/Cmdr644b */ \"./src/palette/Cmdr644b.ts\");\n/* harmony import */ var _palette_Win4bRGBI__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./palette/Win4bRGBI */ \"./src/palette/Win4bRGBI.ts\");\n/* harmony import */ var _palette_Win20cEx__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./palette/Win20cEx */ \"./src/palette/Win20cEx.ts\");\n/* harmony import */ var _palette_ZX4bRGBI__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./palette/ZX4bRGBI */ \"./src/palette/ZX4bRGBI.ts\");\n/* harmony import */ var _palette_Gameboy__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./palette/Gameboy */ \"./src/palette/Gameboy.ts\");\n/* harmony import */ var _palette_RGB__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./palette/RGB */ \"./src/palette/RGB.ts\");\n/* harmony import */ var _utils__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./utils */ \"./src/utils.ts\");\n/* harmony import */ var _palette_Macintosh4b__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./palette/Macintosh4b */ \"./src/palette/Macintosh4b.ts\");\n/* harmony import */ var _palette_Auto__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ./palette/Auto */ \"./src/palette/Auto.ts\");\n/* harmony import */ var _palette_Mono__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ./palette/Mono */ \"./src/palette/Mono.ts\");\n/* harmony import */ var _DitherStyle__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ./DitherStyle */ \"./src/DitherStyle.ts\");\n\n\n\n\n\n\n\n\n\n\n\n\n\n// Initialization\n// Get both canvas elements and contexts\nconst imageCanvas = document.getElementById('canvasOriginal');\nconst imageContext = imageCanvas.getContext('2d');\nconst outputCanvas = document.getElementById('canvasOutput');\n// Load palette data and get the select element\nconst palettes = [\n    _palette_CGA2bModes__WEBPACK_IMPORTED_MODULE_0__.CGAm4p0l,\n    _palette_CGA2bModes__WEBPACK_IMPORTED_MODULE_0__.CGAm4p0h,\n    _palette_CGA2bModes__WEBPACK_IMPORTED_MODULE_0__.CGAm4p1l,\n    _palette_CGA2bModes__WEBPACK_IMPORTED_MODULE_0__.CGAm4p1h,\n    _palette_CGA2bModes__WEBPACK_IMPORTED_MODULE_0__.CGAm5l,\n    _palette_CGA2bModes__WEBPACK_IMPORTED_MODULE_0__.CGAm5h,\n    _palette_Cmdr644b__WEBPACK_IMPORTED_MODULE_2__.default,\n    _palette_Macintosh4b__WEBPACK_IMPORTED_MODULE_9__.default,\n    _palette_Win4bRGBI__WEBPACK_IMPORTED_MODULE_3__.default,\n    _palette_Win20cEx__WEBPACK_IMPORTED_MODULE_4__.default,\n    _palette_CGA4bRGBI__WEBPACK_IMPORTED_MODULE_1__.default,\n    _palette_ZX4bRGBI__WEBPACK_IMPORTED_MODULE_5__.default,\n    _palette_Mono__WEBPACK_IMPORTED_MODULE_11__.MonoW,\n    _palette_Mono__WEBPACK_IMPORTED_MODULE_11__.MonoA,\n    _palette_Mono__WEBPACK_IMPORTED_MODULE_11__.MonoG,\n    _palette_Gameboy__WEBPACK_IMPORTED_MODULE_6__.GameboyG,\n    _palette_Gameboy__WEBPACK_IMPORTED_MODULE_6__.GameboyW,\n    _palette_RGB__WEBPACK_IMPORTED_MODULE_7__.RGB8,\n    _palette_RGB__WEBPACK_IMPORTED_MODULE_7__.RGB64,\n    _palette_RGB__WEBPACK_IMPORTED_MODULE_7__.RGB256,\n    _palette_Auto__WEBPACK_IMPORTED_MODULE_10__.Auto16,\n    _palette_Auto__WEBPACK_IMPORTED_MODULE_10__.Auto64,\n    _palette_Auto__WEBPACK_IMPORTED_MODULE_10__.Auto256\n];\nlet selectedPalette = _palette_Win4bRGBI__WEBPACK_IMPORTED_MODULE_3__.default;\nconst paletteSelect = document.getElementById('paletteSelect');\n// Populate the palette select element\npalettes.forEach(palette => {\n    const option = document.createElement('option');\n    option.setAttribute('value', palette.name);\n    option.text = palette.name;\n    // Try and find the option group the palette belongs in\n    let group;\n    const groups = paletteSelect.getElementsByTagName('optgroup');\n    for (let i = 0; i < groups.length; i++)\n        if (groups[i].label === palette.type)\n            group = groups[i];\n    // If the group doesn't exist, create it\n    if (!group) {\n        group = document.createElement('optgroup');\n        group.label = palette.type;\n        paletteSelect.appendChild(group);\n    }\n    group.appendChild(option);\n});\npaletteSelect.value = selectedPalette.name;\nlet ditherStyle = _DitherStyle__WEBPACK_IMPORTED_MODULE_12__.default.None;\nconst ditherSelect = document.getElementById('ditherStyleSelect');\n// Ugly hacky way to list Enum values since TS provides no built-in for it\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\nconst styles = Object.keys(_DitherStyle__WEBPACK_IMPORTED_MODULE_12__.default).map(k => _DitherStyle__WEBPACK_IMPORTED_MODULE_12__.default[k]);\nstyles.forEach(style => {\n    const option = document.createElement('option');\n    option.setAttribute('value', style);\n    option.text = style;\n    ditherSelect.appendChild(option);\n});\n// Add change handlers for settings\npaletteSelect.addEventListener('change', function (ev) {\n    selectedPalette = palettes.find(p => p.name === ev.target.value) || selectedPalette;\n    (0,_utils__WEBPACK_IMPORTED_MODULE_8__.convertToPalette)(imageCanvas, outputCanvas, selectedPalette, ditherStyle);\n});\nditherSelect.addEventListener('change', function (ev) {\n    ditherStyle = ev.target.value;\n    (0,_utils__WEBPACK_IMPORTED_MODULE_8__.convertToPalette)(imageCanvas, outputCanvas, selectedPalette, ditherStyle);\n});\n// Add file upload handling\nfunction onLoad(img) {\n    let w = img.width;\n    let h = img.height;\n    if (w > 500) {\n        h = 500 * (h / w);\n        w = 500;\n    }\n    imageCanvas.width = w;\n    imageCanvas.height = h;\n    imageContext === null || imageContext === void 0 ? void 0 : imageContext.drawImage(img, 0, 0, w, h);\n    (0,_utils__WEBPACK_IMPORTED_MODULE_8__.convertToPalette)(imageCanvas, outputCanvas, selectedPalette, ditherStyle);\n}\nconst fileInput = document.getElementById('fileInput');\nfileInput.addEventListener('change', function (ev) { (0,_utils__WEBPACK_IMPORTED_MODULE_8__.loadFile)(ev).then(img => onLoad(img)); });\n// Add click handler for view original button\nfunction toggleViewOriginal() {\n    outputCanvas.classList.contains('clip') ?\n        outputCanvas.classList.remove('clip') :\n        outputCanvas.classList.add('clip');\n}\nconst toggleBtn = document.getElementById('toggleOriginal');\ntoggleBtn.addEventListener('click', toggleViewOriginal);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9pbWFnZWJpdGRlcHRoLy4vc3JjL2luZGV4LnRzP2U5NGUiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7QUFBOEY7QUFDbEQ7QUFDRjtBQUNFO0FBQ0Y7QUFDQTtBQUNhO0FBQ0g7QUFDQztBQUNMO0FBQ1M7QUFDSjtBQUNiO0FBQ3hDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSSx5REFBUTtBQUNaLElBQUkseURBQVE7QUFDWixJQUFJLHlEQUFRO0FBQ1osSUFBSSx5REFBUTtBQUNaLElBQUksdURBQU07QUFDVixJQUFJLHVEQUFNO0FBQ1YsSUFBSSxzREFBUTtBQUNaLElBQUkseURBQVc7QUFDZixJQUFJLHVEQUFTO0FBQ2IsSUFBSSxzREFBUTtBQUNaLElBQUksdURBQVM7QUFDYixJQUFJLHNEQUFRO0FBQ1osSUFBSSxpREFBSztBQUNULElBQUksaURBQUs7QUFDVCxJQUFJLGlEQUFLO0FBQ1QsSUFBSSxzREFBUTtBQUNaLElBQUksc0RBQVE7QUFDWixJQUFJLDhDQUFJO0FBQ1IsSUFBSSwrQ0FBSztBQUNULElBQUksZ0RBQU07QUFDVixJQUFJLGtEQUFNO0FBQ1YsSUFBSSxrREFBTTtBQUNWLElBQUksbURBQU87QUFDWDtBQUNBLHNCQUFzQix1REFBUztBQUMvQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxtQkFBbUIsbUJBQW1CO0FBQ3RDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUM7QUFDRDtBQUNBLGtCQUFrQix1REFBZ0I7QUFDbEM7QUFDQTtBQUNBO0FBQ0EsMkJBQTJCLGtEQUFXLFdBQVcsa0RBQVc7QUFDNUQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQSxJQUFJLHdEQUFnQjtBQUNwQixDQUFDO0FBQ0Q7QUFDQTtBQUNBLElBQUksd0RBQWdCO0FBQ3BCLENBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSSx3REFBZ0I7QUFDcEI7QUFDQTtBQUNBLG9EQUFvRCxDQUFDLGdEQUFRLDhCQUE4QixFQUFFO0FBQzdGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EiLCJmaWxlIjoiLi9zcmMvaW5kZXgudHMuanMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBDR0FtNHAwaCwgQ0dBbTRwMGwsIENHQW00cDFoLCBDR0FtNHAxbCwgQ0dBbTVoLCBDR0FtNWwgfSBmcm9tIFwiLi9wYWxldHRlL0NHQTJiTW9kZXNcIjtcbmltcG9ydCBDR0E0YlJHQkkgZnJvbSBcIi4vcGFsZXR0ZS9DR0E0YlJHQklcIjtcbmltcG9ydCBDbWRyNjQ0YiBmcm9tIFwiLi9wYWxldHRlL0NtZHI2NDRiXCI7XG5pbXBvcnQgV2luNGJSR0JJIGZyb20gXCIuL3BhbGV0dGUvV2luNGJSR0JJXCI7XG5pbXBvcnQgV2luMjBjRXggZnJvbSBcIi4vcGFsZXR0ZS9XaW4yMGNFeFwiO1xuaW1wb3J0IFpYNGJSR0JJIGZyb20gXCIuL3BhbGV0dGUvWlg0YlJHQklcIjtcbmltcG9ydCB7IEdhbWVib3lHLCBHYW1lYm95VyB9IGZyb20gXCIuL3BhbGV0dGUvR2FtZWJveVwiO1xuaW1wb3J0IHsgUkdCMjU2LCBSR0I2NCwgUkdCOCB9IGZyb20gXCIuL3BhbGV0dGUvUkdCXCI7XG5pbXBvcnQgeyBjb252ZXJ0VG9QYWxldHRlLCBsb2FkRmlsZSB9IGZyb20gXCIuL3V0aWxzXCI7XG5pbXBvcnQgTWFjaW50b3NoNGIgZnJvbSBcIi4vcGFsZXR0ZS9NYWNpbnRvc2g0YlwiO1xuaW1wb3J0IHsgQXV0bzE2LCBBdXRvMjU2LCBBdXRvNjQgfSBmcm9tIFwiLi9wYWxldHRlL0F1dG9cIjtcbmltcG9ydCB7IE1vbm9BLCBNb25vRywgTW9ub1cgfSBmcm9tIFwiLi9wYWxldHRlL01vbm9cIjtcbmltcG9ydCBEaXRoZXJTdHlsZSBmcm9tIFwiLi9EaXRoZXJTdHlsZVwiO1xuLy8gSW5pdGlhbGl6YXRpb25cbi8vIEdldCBib3RoIGNhbnZhcyBlbGVtZW50cyBhbmQgY29udGV4dHNcbmNvbnN0IGltYWdlQ2FudmFzID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2NhbnZhc09yaWdpbmFsJyk7XG5jb25zdCBpbWFnZUNvbnRleHQgPSBpbWFnZUNhbnZhcy5nZXRDb250ZXh0KCcyZCcpO1xuY29uc3Qgb3V0cHV0Q2FudmFzID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2NhbnZhc091dHB1dCcpO1xuLy8gTG9hZCBwYWxldHRlIGRhdGEgYW5kIGdldCB0aGUgc2VsZWN0IGVsZW1lbnRcbmNvbnN0IHBhbGV0dGVzID0gW1xuICAgIENHQW00cDBsLFxuICAgIENHQW00cDBoLFxuICAgIENHQW00cDFsLFxuICAgIENHQW00cDFoLFxuICAgIENHQW01bCxcbiAgICBDR0FtNWgsXG4gICAgQ21kcjY0NGIsXG4gICAgTWFjaW50b3NoNGIsXG4gICAgV2luNGJSR0JJLFxuICAgIFdpbjIwY0V4LFxuICAgIENHQTRiUkdCSSxcbiAgICBaWDRiUkdCSSxcbiAgICBNb25vVyxcbiAgICBNb25vQSxcbiAgICBNb25vRyxcbiAgICBHYW1lYm95RyxcbiAgICBHYW1lYm95VyxcbiAgICBSR0I4LFxuICAgIFJHQjY0LFxuICAgIFJHQjI1NixcbiAgICBBdXRvMTYsXG4gICAgQXV0bzY0LFxuICAgIEF1dG8yNTZcbl07XG5sZXQgc2VsZWN0ZWRQYWxldHRlID0gV2luNGJSR0JJO1xuY29uc3QgcGFsZXR0ZVNlbGVjdCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdwYWxldHRlU2VsZWN0Jyk7XG4vLyBQb3B1bGF0ZSB0aGUgcGFsZXR0ZSBzZWxlY3QgZWxlbWVudFxucGFsZXR0ZXMuZm9yRWFjaChwYWxldHRlID0+IHtcbiAgICBjb25zdCBvcHRpb24gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdvcHRpb24nKTtcbiAgICBvcHRpb24uc2V0QXR0cmlidXRlKCd2YWx1ZScsIHBhbGV0dGUubmFtZSk7XG4gICAgb3B0aW9uLnRleHQgPSBwYWxldHRlLm5hbWU7XG4gICAgLy8gVHJ5IGFuZCBmaW5kIHRoZSBvcHRpb24gZ3JvdXAgdGhlIHBhbGV0dGUgYmVsb25ncyBpblxuICAgIGxldCBncm91cDtcbiAgICBjb25zdCBncm91cHMgPSBwYWxldHRlU2VsZWN0LmdldEVsZW1lbnRzQnlUYWdOYW1lKCdvcHRncm91cCcpO1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgZ3JvdXBzLmxlbmd0aDsgaSsrKVxuICAgICAgICBpZiAoZ3JvdXBzW2ldLmxhYmVsID09PSBwYWxldHRlLnR5cGUpXG4gICAgICAgICAgICBncm91cCA9IGdyb3Vwc1tpXTtcbiAgICAvLyBJZiB0aGUgZ3JvdXAgZG9lc24ndCBleGlzdCwgY3JlYXRlIGl0XG4gICAgaWYgKCFncm91cCkge1xuICAgICAgICBncm91cCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ29wdGdyb3VwJyk7XG4gICAgICAgIGdyb3VwLmxhYmVsID0gcGFsZXR0ZS50eXBlO1xuICAgICAgICBwYWxldHRlU2VsZWN0LmFwcGVuZENoaWxkKGdyb3VwKTtcbiAgICB9XG4gICAgZ3JvdXAuYXBwZW5kQ2hpbGQob3B0aW9uKTtcbn0pO1xucGFsZXR0ZVNlbGVjdC52YWx1ZSA9IHNlbGVjdGVkUGFsZXR0ZS5uYW1lO1xubGV0IGRpdGhlclN0eWxlID0gRGl0aGVyU3R5bGUuTm9uZTtcbmNvbnN0IGRpdGhlclNlbGVjdCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdkaXRoZXJTdHlsZVNlbGVjdCcpO1xuLy8gVWdseSBoYWNreSB3YXkgdG8gbGlzdCBFbnVtIHZhbHVlcyBzaW5jZSBUUyBwcm92aWRlcyBubyBidWlsdC1pbiBmb3IgaXRcbi8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XG5jb25zdCBzdHlsZXMgPSBPYmplY3Qua2V5cyhEaXRoZXJTdHlsZSkubWFwKGsgPT4gRGl0aGVyU3R5bGVba10pO1xuc3R5bGVzLmZvckVhY2goc3R5bGUgPT4ge1xuICAgIGNvbnN0IG9wdGlvbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ29wdGlvbicpO1xuICAgIG9wdGlvbi5zZXRBdHRyaWJ1dGUoJ3ZhbHVlJywgc3R5bGUpO1xuICAgIG9wdGlvbi50ZXh0ID0gc3R5bGU7XG4gICAgZGl0aGVyU2VsZWN0LmFwcGVuZENoaWxkKG9wdGlvbik7XG59KTtcbi8vIEFkZCBjaGFuZ2UgaGFuZGxlcnMgZm9yIHNldHRpbmdzXG5wYWxldHRlU2VsZWN0LmFkZEV2ZW50TGlzdGVuZXIoJ2NoYW5nZScsIGZ1bmN0aW9uIChldikge1xuICAgIHNlbGVjdGVkUGFsZXR0ZSA9IHBhbGV0dGVzLmZpbmQocCA9PiBwLm5hbWUgPT09IGV2LnRhcmdldC52YWx1ZSkgfHwgc2VsZWN0ZWRQYWxldHRlO1xuICAgIGNvbnZlcnRUb1BhbGV0dGUoaW1hZ2VDYW52YXMsIG91dHB1dENhbnZhcywgc2VsZWN0ZWRQYWxldHRlLCBkaXRoZXJTdHlsZSk7XG59KTtcbmRpdGhlclNlbGVjdC5hZGRFdmVudExpc3RlbmVyKCdjaGFuZ2UnLCBmdW5jdGlvbiAoZXYpIHtcbiAgICBkaXRoZXJTdHlsZSA9IGV2LnRhcmdldC52YWx1ZTtcbiAgICBjb252ZXJ0VG9QYWxldHRlKGltYWdlQ2FudmFzLCBvdXRwdXRDYW52YXMsIHNlbGVjdGVkUGFsZXR0ZSwgZGl0aGVyU3R5bGUpO1xufSk7XG4vLyBBZGQgZmlsZSB1cGxvYWQgaGFuZGxpbmdcbmZ1bmN0aW9uIG9uTG9hZChpbWcpIHtcbiAgICBsZXQgdyA9IGltZy53aWR0aDtcbiAgICBsZXQgaCA9IGltZy5oZWlnaHQ7XG4gICAgaWYgKHcgPiA1MDApIHtcbiAgICAgICAgaCA9IDUwMCAqIChoIC8gdyk7XG4gICAgICAgIHcgPSA1MDA7XG4gICAgfVxuICAgIGltYWdlQ2FudmFzLndpZHRoID0gdztcbiAgICBpbWFnZUNhbnZhcy5oZWlnaHQgPSBoO1xuICAgIGltYWdlQ29udGV4dCA9PT0gbnVsbCB8fCBpbWFnZUNvbnRleHQgPT09IHZvaWQgMCA/IHZvaWQgMCA6IGltYWdlQ29udGV4dC5kcmF3SW1hZ2UoaW1nLCAwLCAwLCB3LCBoKTtcbiAgICBjb252ZXJ0VG9QYWxldHRlKGltYWdlQ2FudmFzLCBvdXRwdXRDYW52YXMsIHNlbGVjdGVkUGFsZXR0ZSwgZGl0aGVyU3R5bGUpO1xufVxuY29uc3QgZmlsZUlucHV0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2ZpbGVJbnB1dCcpO1xuZmlsZUlucHV0LmFkZEV2ZW50TGlzdGVuZXIoJ2NoYW5nZScsIGZ1bmN0aW9uIChldikgeyBsb2FkRmlsZShldikudGhlbihpbWcgPT4gb25Mb2FkKGltZykpOyB9KTtcbi8vIEFkZCBjbGljayBoYW5kbGVyIGZvciB2aWV3IG9yaWdpbmFsIGJ1dHRvblxuZnVuY3Rpb24gdG9nZ2xlVmlld09yaWdpbmFsKCkge1xuICAgIG91dHB1dENhbnZhcy5jbGFzc0xpc3QuY29udGFpbnMoJ2NsaXAnKSA/XG4gICAgICAgIG91dHB1dENhbnZhcy5jbGFzc0xpc3QucmVtb3ZlKCdjbGlwJykgOlxuICAgICAgICBvdXRwdXRDYW52YXMuY2xhc3NMaXN0LmFkZCgnY2xpcCcpO1xufVxuY29uc3QgdG9nZ2xlQnRuID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3RvZ2dsZU9yaWdpbmFsJyk7XG50b2dnbGVCdG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCB0b2dnbGVWaWV3T3JpZ2luYWwpO1xuIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./src/index.ts\n");

/***/ }),

/***/ "./src/palette/Auto.ts":
/*!*****************************!*\
  !*** ./src/palette/Auto.ts ***!
  \*****************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"Auto16\": () => (/* binding */ Auto16),\n/* harmony export */   \"Auto64\": () => (/* binding */ Auto64),\n/* harmony export */   \"Auto256\": () => (/* binding */ Auto256)\n/* harmony export */ });\n/* harmony import */ var _PaletteGroups__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../PaletteGroups */ \"./src/PaletteGroups.ts\");\n\nconst Auto16 = {\n    name: 'Auto 16-color (4-bit indexed)',\n    type: _PaletteGroups__WEBPACK_IMPORTED_MODULE_0__.default.PAuto,\n    useAlpha: false,\n    data: [\n        [16, -1, 4],\n        [1, 0, 0]\n    ]\n};\nconst Auto64 = {\n    name: 'Auto 64-color (6-bit indexed)',\n    type: _PaletteGroups__WEBPACK_IMPORTED_MODULE_0__.default.PAuto,\n    useAlpha: false,\n    data: [\n        [64, 1, 5],\n        [1, 0, 0]\n    ]\n};\nconst Auto256 = {\n    name: 'Auto 256-color (8-bit indexed)',\n    type: _PaletteGroups__WEBPACK_IMPORTED_MODULE_0__.default.PAuto,\n    useAlpha: false,\n    data: [\n        [256, 2, 5],\n        [1, 0, 0]\n    ]\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9pbWFnZWJpdGRlcHRoLy4vc3JjL3BhbGV0dGUvQXV0by50cz9kMzhlIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7Ozs7QUFBMkM7QUFDcEM7QUFDUDtBQUNBLFVBQVUseURBQWlCO0FBQzNCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNPO0FBQ1A7QUFDQSxVQUFVLHlEQUFpQjtBQUMzQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDTztBQUNQO0FBQ0EsVUFBVSx5REFBaUI7QUFDM0I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBIiwiZmlsZSI6Ii4vc3JjL3BhbGV0dGUvQXV0by50cy5qcyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBQYWxldHRlVHlwZSBmcm9tIFwiLi4vUGFsZXR0ZUdyb3Vwc1wiO1xuZXhwb3J0IGNvbnN0IEF1dG8xNiA9IHtcbiAgICBuYW1lOiAnQXV0byAxNi1jb2xvciAoNC1iaXQgaW5kZXhlZCknLFxuICAgIHR5cGU6IFBhbGV0dGVUeXBlLlBBdXRvLFxuICAgIHVzZUFscGhhOiBmYWxzZSxcbiAgICBkYXRhOiBbXG4gICAgICAgIFsxNiwgLTEsIDRdLFxuICAgICAgICBbMSwgMCwgMF1cbiAgICBdXG59O1xuZXhwb3J0IGNvbnN0IEF1dG82NCA9IHtcbiAgICBuYW1lOiAnQXV0byA2NC1jb2xvciAoNi1iaXQgaW5kZXhlZCknLFxuICAgIHR5cGU6IFBhbGV0dGVUeXBlLlBBdXRvLFxuICAgIHVzZUFscGhhOiBmYWxzZSxcbiAgICBkYXRhOiBbXG4gICAgICAgIFs2NCwgMSwgNV0sXG4gICAgICAgIFsxLCAwLCAwXVxuICAgIF1cbn07XG5leHBvcnQgY29uc3QgQXV0bzI1NiA9IHtcbiAgICBuYW1lOiAnQXV0byAyNTYtY29sb3IgKDgtYml0IGluZGV4ZWQpJyxcbiAgICB0eXBlOiBQYWxldHRlVHlwZS5QQXV0byxcbiAgICB1c2VBbHBoYTogZmFsc2UsXG4gICAgZGF0YTogW1xuICAgICAgICBbMjU2LCAyLCA1XSxcbiAgICAgICAgWzEsIDAsIDBdXG4gICAgXVxufTtcbiJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./src/palette/Auto.ts\n");

/***/ }),

/***/ "./src/palette/CGA2bModes.ts":
/*!***********************************!*\
  !*** ./src/palette/CGA2bModes.ts ***!
  \***********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"CGAm4p0l\": () => (/* binding */ CGAm4p0l),\n/* harmony export */   \"CGAm4p0h\": () => (/* binding */ CGAm4p0h),\n/* harmony export */   \"CGAm4p1l\": () => (/* binding */ CGAm4p1l),\n/* harmony export */   \"CGAm4p1h\": () => (/* binding */ CGAm4p1h),\n/* harmony export */   \"CGAm5l\": () => (/* binding */ CGAm5l),\n/* harmony export */   \"CGAm5h\": () => (/* binding */ CGAm5h)\n/* harmony export */ });\n/* harmony import */ var _PaletteGroups__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../PaletteGroups */ \"./src/PaletteGroups.ts\");\n\nconst CGAm4p0l = {\n    name: 'CGA Mode 4 Palette 0 (low)',\n    type: _PaletteGroups__WEBPACK_IMPORTED_MODULE_0__.default.P2BitIndexed,\n    useAlpha: false,\n    data: [\n        [0x00, 0x00, 0x00],\n        [0x00, 0xAA, 0x00],\n        [0xAA, 0x00, 0x00],\n        [0xAA, 0x55, 0x00] // Brown\n    ]\n};\nconst CGAm4p0h = {\n    name: 'CGA Mode 4 Palette 0 (high)',\n    type: _PaletteGroups__WEBPACK_IMPORTED_MODULE_0__.default.P2BitIndexed,\n    useAlpha: false,\n    data: [\n        [0x00, 0x00, 0x00],\n        [0x55, 0xFF, 0x55],\n        [0xFF, 0x55, 0x55],\n        [0xFF, 0xFF, 0x55] // Yellow\n    ]\n};\nconst CGAm4p1l = {\n    name: 'CGA Mode 4 Palette 1 (low)',\n    type: _PaletteGroups__WEBPACK_IMPORTED_MODULE_0__.default.P2BitIndexed,\n    useAlpha: false,\n    data: [\n        [0x00, 0x00, 0x00],\n        [0x00, 0xAA, 0xAA],\n        [0xAA, 0x00, 0xAA],\n        [0xAA, 0xAA, 0xAA] // Light Grey\n    ]\n};\nconst CGAm4p1h = {\n    name: 'CGA Mode 4 Palette 1 (high)',\n    type: _PaletteGroups__WEBPACK_IMPORTED_MODULE_0__.default.P2BitIndexed,\n    useAlpha: false,\n    data: [\n        [0x00, 0x00, 0x00],\n        [0x55, 0xFF, 0xFF],\n        [0xFF, 0x55, 0xFF],\n        [0xFF, 0xFF, 0xFF] // White\n    ]\n};\nconst CGAm5l = {\n    name: 'CGA Mode 5 (low)',\n    type: _PaletteGroups__WEBPACK_IMPORTED_MODULE_0__.default.P2BitIndexed,\n    useAlpha: false,\n    data: [\n        [0x00, 0x00, 0x00],\n        [0x00, 0xAA, 0xAA],\n        [0xAA, 0x00, 0x00],\n        [0xAA, 0xAA, 0xAA] // Light Grey\n    ]\n};\nconst CGAm5h = {\n    name: 'CGA Mode 5 (high)',\n    type: _PaletteGroups__WEBPACK_IMPORTED_MODULE_0__.default.P2BitIndexed,\n    useAlpha: false,\n    data: [\n        [0x00, 0x00, 0x00],\n        [0x55, 0xFF, 0xFF],\n        [0xFF, 0x55, 0x55],\n        [0xFF, 0xFF, 0xFF] // White\n    ]\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9pbWFnZWJpdGRlcHRoLy4vc3JjL3BhbGV0dGUvQ0dBMmJNb2Rlcy50cz9kMTg1Il0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7QUFBMkM7QUFDcEM7QUFDUDtBQUNBLFVBQVUsZ0VBQXdCO0FBQ2xDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDTztBQUNQO0FBQ0EsVUFBVSxnRUFBd0I7QUFDbEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNPO0FBQ1A7QUFDQSxVQUFVLGdFQUF3QjtBQUNsQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ087QUFDUDtBQUNBLFVBQVUsZ0VBQXdCO0FBQ2xDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDTztBQUNQO0FBQ0EsVUFBVSxnRUFBd0I7QUFDbEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNPO0FBQ1A7QUFDQSxVQUFVLGdFQUF3QjtBQUNsQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBIiwiZmlsZSI6Ii4vc3JjL3BhbGV0dGUvQ0dBMmJNb2Rlcy50cy5qcyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBQYWxldHRlVHlwZSBmcm9tIFwiLi4vUGFsZXR0ZUdyb3Vwc1wiO1xuZXhwb3J0IGNvbnN0IENHQW00cDBsID0ge1xuICAgIG5hbWU6ICdDR0EgTW9kZSA0IFBhbGV0dGUgMCAobG93KScsXG4gICAgdHlwZTogUGFsZXR0ZVR5cGUuUDJCaXRJbmRleGVkLFxuICAgIHVzZUFscGhhOiBmYWxzZSxcbiAgICBkYXRhOiBbXG4gICAgICAgIFsweDAwLCAweDAwLCAweDAwXSxcbiAgICAgICAgWzB4MDAsIDB4QUEsIDB4MDBdLFxuICAgICAgICBbMHhBQSwgMHgwMCwgMHgwMF0sXG4gICAgICAgIFsweEFBLCAweDU1LCAweDAwXSAvLyBCcm93blxuICAgIF1cbn07XG5leHBvcnQgY29uc3QgQ0dBbTRwMGggPSB7XG4gICAgbmFtZTogJ0NHQSBNb2RlIDQgUGFsZXR0ZSAwIChoaWdoKScsXG4gICAgdHlwZTogUGFsZXR0ZVR5cGUuUDJCaXRJbmRleGVkLFxuICAgIHVzZUFscGhhOiBmYWxzZSxcbiAgICBkYXRhOiBbXG4gICAgICAgIFsweDAwLCAweDAwLCAweDAwXSxcbiAgICAgICAgWzB4NTUsIDB4RkYsIDB4NTVdLFxuICAgICAgICBbMHhGRiwgMHg1NSwgMHg1NV0sXG4gICAgICAgIFsweEZGLCAweEZGLCAweDU1XSAvLyBZZWxsb3dcbiAgICBdXG59O1xuZXhwb3J0IGNvbnN0IENHQW00cDFsID0ge1xuICAgIG5hbWU6ICdDR0EgTW9kZSA0IFBhbGV0dGUgMSAobG93KScsXG4gICAgdHlwZTogUGFsZXR0ZVR5cGUuUDJCaXRJbmRleGVkLFxuICAgIHVzZUFscGhhOiBmYWxzZSxcbiAgICBkYXRhOiBbXG4gICAgICAgIFsweDAwLCAweDAwLCAweDAwXSxcbiAgICAgICAgWzB4MDAsIDB4QUEsIDB4QUFdLFxuICAgICAgICBbMHhBQSwgMHgwMCwgMHhBQV0sXG4gICAgICAgIFsweEFBLCAweEFBLCAweEFBXSAvLyBMaWdodCBHcmV5XG4gICAgXVxufTtcbmV4cG9ydCBjb25zdCBDR0FtNHAxaCA9IHtcbiAgICBuYW1lOiAnQ0dBIE1vZGUgNCBQYWxldHRlIDEgKGhpZ2gpJyxcbiAgICB0eXBlOiBQYWxldHRlVHlwZS5QMkJpdEluZGV4ZWQsXG4gICAgdXNlQWxwaGE6IGZhbHNlLFxuICAgIGRhdGE6IFtcbiAgICAgICAgWzB4MDAsIDB4MDAsIDB4MDBdLFxuICAgICAgICBbMHg1NSwgMHhGRiwgMHhGRl0sXG4gICAgICAgIFsweEZGLCAweDU1LCAweEZGXSxcbiAgICAgICAgWzB4RkYsIDB4RkYsIDB4RkZdIC8vIFdoaXRlXG4gICAgXVxufTtcbmV4cG9ydCBjb25zdCBDR0FtNWwgPSB7XG4gICAgbmFtZTogJ0NHQSBNb2RlIDUgKGxvdyknLFxuICAgIHR5cGU6IFBhbGV0dGVUeXBlLlAyQml0SW5kZXhlZCxcbiAgICB1c2VBbHBoYTogZmFsc2UsXG4gICAgZGF0YTogW1xuICAgICAgICBbMHgwMCwgMHgwMCwgMHgwMF0sXG4gICAgICAgIFsweDAwLCAweEFBLCAweEFBXSxcbiAgICAgICAgWzB4QUEsIDB4MDAsIDB4MDBdLFxuICAgICAgICBbMHhBQSwgMHhBQSwgMHhBQV0gLy8gTGlnaHQgR3JleVxuICAgIF1cbn07XG5leHBvcnQgY29uc3QgQ0dBbTVoID0ge1xuICAgIG5hbWU6ICdDR0EgTW9kZSA1IChoaWdoKScsXG4gICAgdHlwZTogUGFsZXR0ZVR5cGUuUDJCaXRJbmRleGVkLFxuICAgIHVzZUFscGhhOiBmYWxzZSxcbiAgICBkYXRhOiBbXG4gICAgICAgIFsweDAwLCAweDAwLCAweDAwXSxcbiAgICAgICAgWzB4NTUsIDB4RkYsIDB4RkZdLFxuICAgICAgICBbMHhGRiwgMHg1NSwgMHg1NV0sXG4gICAgICAgIFsweEZGLCAweEZGLCAweEZGXSAvLyBXaGl0ZVxuICAgIF1cbn07XG4iXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./src/palette/CGA2bModes.ts\n");

/***/ }),

/***/ "./src/palette/CGA4bRGBI.ts":
/*!**********************************!*\
  !*** ./src/palette/CGA4bRGBI.ts ***!
  \**********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var _PaletteGroups__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../PaletteGroups */ \"./src/PaletteGroups.ts\");\n\nconst CGA4bRGBI = {\n    name: 'CGA 4-bit RGBI (IBM)',\n    type: _PaletteGroups__WEBPACK_IMPORTED_MODULE_0__.default.P4BitRGBI,\n    useAlpha: false,\n    data: [\n        [0x00, 0x00, 0x00],\n        [0x00, 0x00, 0xAA],\n        [0x00, 0xAA, 0x00],\n        [0x00, 0xAA, 0xAA],\n        [0xAA, 0x00, 0x00],\n        [0xAA, 0x00, 0xAA],\n        [0xAA, 0x55, 0x00],\n        [0xAA, 0xAA, 0xAA],\n        [0x55, 0x55, 0x55],\n        [0x55, 0x55, 0xFF],\n        [0x55, 0xFF, 0x55],\n        [0x55, 0xFF, 0xFF],\n        [0xFF, 0x55, 0x55],\n        [0xFF, 0x55, 0xFF],\n        [0xFF, 0xFF, 0x55],\n        [0xFF, 0xFF, 0xFF] // White\n    ]\n};\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (CGA4bRGBI);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9pbWFnZWJpdGRlcHRoLy4vc3JjL3BhbGV0dGUvQ0dBNGJSR0JJLnRzP2Y2ODciXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7Ozs7QUFBMkM7QUFDM0M7QUFDQTtBQUNBLFVBQVUsNkRBQXFCO0FBQy9CO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpRUFBZSxTQUFTLEVBQUMiLCJmaWxlIjoiLi9zcmMvcGFsZXR0ZS9DR0E0YlJHQkkudHMuanMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgUGFsZXR0ZVR5cGUgZnJvbSBcIi4uL1BhbGV0dGVHcm91cHNcIjtcbmNvbnN0IENHQTRiUkdCSSA9IHtcbiAgICBuYW1lOiAnQ0dBIDQtYml0IFJHQkkgKElCTSknLFxuICAgIHR5cGU6IFBhbGV0dGVUeXBlLlA0Qml0UkdCSSxcbiAgICB1c2VBbHBoYTogZmFsc2UsXG4gICAgZGF0YTogW1xuICAgICAgICBbMHgwMCwgMHgwMCwgMHgwMF0sXG4gICAgICAgIFsweDAwLCAweDAwLCAweEFBXSxcbiAgICAgICAgWzB4MDAsIDB4QUEsIDB4MDBdLFxuICAgICAgICBbMHgwMCwgMHhBQSwgMHhBQV0sXG4gICAgICAgIFsweEFBLCAweDAwLCAweDAwXSxcbiAgICAgICAgWzB4QUEsIDB4MDAsIDB4QUFdLFxuICAgICAgICBbMHhBQSwgMHg1NSwgMHgwMF0sXG4gICAgICAgIFsweEFBLCAweEFBLCAweEFBXSxcbiAgICAgICAgWzB4NTUsIDB4NTUsIDB4NTVdLFxuICAgICAgICBbMHg1NSwgMHg1NSwgMHhGRl0sXG4gICAgICAgIFsweDU1LCAweEZGLCAweDU1XSxcbiAgICAgICAgWzB4NTUsIDB4RkYsIDB4RkZdLFxuICAgICAgICBbMHhGRiwgMHg1NSwgMHg1NV0sXG4gICAgICAgIFsweEZGLCAweDU1LCAweEZGXSxcbiAgICAgICAgWzB4RkYsIDB4RkYsIDB4NTVdLFxuICAgICAgICBbMHhGRiwgMHhGRiwgMHhGRl0gLy8gV2hpdGVcbiAgICBdXG59O1xuZXhwb3J0IGRlZmF1bHQgQ0dBNGJSR0JJO1xuIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./src/palette/CGA4bRGBI.ts\n");

/***/ }),

/***/ "./src/palette/Cmdr644b.ts":
/*!*********************************!*\
  !*** ./src/palette/Cmdr644b.ts ***!
  \*********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var _PaletteGroups__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../PaletteGroups */ \"./src/PaletteGroups.ts\");\n\nconst Cmdr644b = {\n    name: 'Commodore 64',\n    type: _PaletteGroups__WEBPACK_IMPORTED_MODULE_0__.default.P4BitIndexed,\n    useAlpha: false,\n    data: [\n        [0x00, 0x00, 0x00],\n        [0x62, 0x62, 0x52],\n        [0x89, 0x89, 0x89],\n        [0xAD, 0xAD, 0xAD],\n        [0xFF, 0xFF, 0xFF],\n        [0x9F, 0x4E, 0x44],\n        [0xCB, 0x7E, 0x75],\n        [0x6D, 0x54, 0x12],\n        [0xA1, 0x68, 0x3C],\n        [0xC9, 0xD4, 0x87],\n        [0x9A, 0xE2, 0x9B],\n        [0x5C, 0xAB, 0x5E],\n        [0x6A, 0xBF, 0xC6],\n        [0x88, 0x7E, 0xCB],\n        [0x50, 0x45, 0x9B],\n        [0xA0, 0x57, 0xA3] // Purple\n    ]\n};\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (Cmdr644b);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9pbWFnZWJpdGRlcHRoLy4vc3JjL3BhbGV0dGUvQ21kcjY0NGIudHM/YzE5NSJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7OztBQUEyQztBQUMzQztBQUNBO0FBQ0EsVUFBVSxnRUFBd0I7QUFDbEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlFQUFlLFFBQVEsRUFBQyIsImZpbGUiOiIuL3NyYy9wYWxldHRlL0NtZHI2NDRiLnRzLmpzIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IFBhbGV0dGVUeXBlIGZyb20gXCIuLi9QYWxldHRlR3JvdXBzXCI7XG5jb25zdCBDbWRyNjQ0YiA9IHtcbiAgICBuYW1lOiAnQ29tbW9kb3JlIDY0JyxcbiAgICB0eXBlOiBQYWxldHRlVHlwZS5QNEJpdEluZGV4ZWQsXG4gICAgdXNlQWxwaGE6IGZhbHNlLFxuICAgIGRhdGE6IFtcbiAgICAgICAgWzB4MDAsIDB4MDAsIDB4MDBdLFxuICAgICAgICBbMHg2MiwgMHg2MiwgMHg1Ml0sXG4gICAgICAgIFsweDg5LCAweDg5LCAweDg5XSxcbiAgICAgICAgWzB4QUQsIDB4QUQsIDB4QURdLFxuICAgICAgICBbMHhGRiwgMHhGRiwgMHhGRl0sXG4gICAgICAgIFsweDlGLCAweDRFLCAweDQ0XSxcbiAgICAgICAgWzB4Q0IsIDB4N0UsIDB4NzVdLFxuICAgICAgICBbMHg2RCwgMHg1NCwgMHgxMl0sXG4gICAgICAgIFsweEExLCAweDY4LCAweDNDXSxcbiAgICAgICAgWzB4QzksIDB4RDQsIDB4ODddLFxuICAgICAgICBbMHg5QSwgMHhFMiwgMHg5Ql0sXG4gICAgICAgIFsweDVDLCAweEFCLCAweDVFXSxcbiAgICAgICAgWzB4NkEsIDB4QkYsIDB4QzZdLFxuICAgICAgICBbMHg4OCwgMHg3RSwgMHhDQl0sXG4gICAgICAgIFsweDUwLCAweDQ1LCAweDlCXSxcbiAgICAgICAgWzB4QTAsIDB4NTcsIDB4QTNdIC8vIFB1cnBsZVxuICAgIF1cbn07XG5leHBvcnQgZGVmYXVsdCBDbWRyNjQ0YjtcbiJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./src/palette/Cmdr644b.ts\n");

/***/ }),

/***/ "./src/palette/Gameboy.ts":
/*!********************************!*\
  !*** ./src/palette/Gameboy.ts ***!
  \********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"GameboyG\": () => (/* binding */ GameboyG),\n/* harmony export */   \"GameboyW\": () => (/* binding */ GameboyW)\n/* harmony export */ });\n/* harmony import */ var _PaletteGroups__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../PaletteGroups */ \"./src/PaletteGroups.ts\");\n\nconst GameboyG = {\n    name: 'Game Boy Green (2-bit MC)',\n    type: _PaletteGroups__WEBPACK_IMPORTED_MODULE_0__.default.PMono,\n    useAlpha: false,\n    data: [\n        [0x0F, 0x38, 0x0F],\n        [0x30, 0x62, 0x30],\n        [0x8B, 0xAC, 0x0F],\n        [0x9B, 0xBC, 0x0F]\n    ]\n};\nconst GameboyW = {\n    name: 'Game Boy White (2-bit MC)',\n    type: _PaletteGroups__WEBPACK_IMPORTED_MODULE_0__.default.PMono,\n    useAlpha: false,\n    data: [\n        [0x00, 0x00, 0x00],\n        [0x55, 0x55, 0x55],\n        [0xAA, 0xAA, 0xAA],\n        [0xFF, 0xFF, 0xFF]\n    ]\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9pbWFnZWJpdGRlcHRoLy4vc3JjL3BhbGV0dGUvR2FtZWJveS50cz81Y2YwIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7OztBQUEyQztBQUNwQztBQUNQO0FBQ0EsVUFBVSx5REFBaUI7QUFDM0I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNPO0FBQ1A7QUFDQSxVQUFVLHlEQUFpQjtBQUMzQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBIiwiZmlsZSI6Ii4vc3JjL3BhbGV0dGUvR2FtZWJveS50cy5qcyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBQYWxldHRlVHlwZSBmcm9tIFwiLi4vUGFsZXR0ZUdyb3Vwc1wiO1xuZXhwb3J0IGNvbnN0IEdhbWVib3lHID0ge1xuICAgIG5hbWU6ICdHYW1lIEJveSBHcmVlbiAoMi1iaXQgTUMpJyxcbiAgICB0eXBlOiBQYWxldHRlVHlwZS5QTW9ubyxcbiAgICB1c2VBbHBoYTogZmFsc2UsXG4gICAgZGF0YTogW1xuICAgICAgICBbMHgwRiwgMHgzOCwgMHgwRl0sXG4gICAgICAgIFsweDMwLCAweDYyLCAweDMwXSxcbiAgICAgICAgWzB4OEIsIDB4QUMsIDB4MEZdLFxuICAgICAgICBbMHg5QiwgMHhCQywgMHgwRl1cbiAgICBdXG59O1xuZXhwb3J0IGNvbnN0IEdhbWVib3lXID0ge1xuICAgIG5hbWU6ICdHYW1lIEJveSBXaGl0ZSAoMi1iaXQgTUMpJyxcbiAgICB0eXBlOiBQYWxldHRlVHlwZS5QTW9ubyxcbiAgICB1c2VBbHBoYTogZmFsc2UsXG4gICAgZGF0YTogW1xuICAgICAgICBbMHgwMCwgMHgwMCwgMHgwMF0sXG4gICAgICAgIFsweDU1LCAweDU1LCAweDU1XSxcbiAgICAgICAgWzB4QUEsIDB4QUEsIDB4QUFdLFxuICAgICAgICBbMHhGRiwgMHhGRiwgMHhGRl1cbiAgICBdXG59O1xuIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./src/palette/Gameboy.ts\n");

/***/ }),

/***/ "./src/palette/Macintosh4b.ts":
/*!************************************!*\
  !*** ./src/palette/Macintosh4b.ts ***!
  \************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var _PaletteGroups__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../PaletteGroups */ \"./src/PaletteGroups.ts\");\n\nconst Macintosh4b = {\n    name: 'Macintosh II (1987)',\n    type: _PaletteGroups__WEBPACK_IMPORTED_MODULE_0__.default.P4BitIndexed,\n    useAlpha: false,\n    data: [\n        [0xFF, 0xFF, 0xFF],\n        [0xFF, 0xFF, 0x00],\n        [0xFF, 0x66, 0x00],\n        [0xDD, 0x00, 0x00],\n        [0xFF, 0x00, 0x99],\n        [0x33, 0x00, 0x99],\n        [0x00, 0x00, 0xCC],\n        [0x00, 0x99, 0xFF],\n        [0x00, 0xAA, 0x00],\n        [0x00, 0x66, 0x00],\n        [0x66, 0x33, 0x00],\n        [0x99, 0x66, 0x33],\n        [0xBB, 0xBB, 0xBB],\n        [0x88, 0x88, 0x88],\n        [0x44, 0x44, 0x44],\n        [0x00, 0x00, 0x00] // Black\n    ]\n};\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (Macintosh4b);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9pbWFnZWJpdGRlcHRoLy4vc3JjL3BhbGV0dGUvTWFjaW50b3NoNGIudHM/NTM2OCJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7OztBQUEyQztBQUMzQztBQUNBO0FBQ0EsVUFBVSxnRUFBd0I7QUFDbEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlFQUFlLFdBQVcsRUFBQyIsImZpbGUiOiIuL3NyYy9wYWxldHRlL01hY2ludG9zaDRiLnRzLmpzIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IFBhbGV0dGVUeXBlIGZyb20gXCIuLi9QYWxldHRlR3JvdXBzXCI7XG5jb25zdCBNYWNpbnRvc2g0YiA9IHtcbiAgICBuYW1lOiAnTWFjaW50b3NoIElJICgxOTg3KScsXG4gICAgdHlwZTogUGFsZXR0ZVR5cGUuUDRCaXRJbmRleGVkLFxuICAgIHVzZUFscGhhOiBmYWxzZSxcbiAgICBkYXRhOiBbXG4gICAgICAgIFsweEZGLCAweEZGLCAweEZGXSxcbiAgICAgICAgWzB4RkYsIDB4RkYsIDB4MDBdLFxuICAgICAgICBbMHhGRiwgMHg2NiwgMHgwMF0sXG4gICAgICAgIFsweERELCAweDAwLCAweDAwXSxcbiAgICAgICAgWzB4RkYsIDB4MDAsIDB4OTldLFxuICAgICAgICBbMHgzMywgMHgwMCwgMHg5OV0sXG4gICAgICAgIFsweDAwLCAweDAwLCAweENDXSxcbiAgICAgICAgWzB4MDAsIDB4OTksIDB4RkZdLFxuICAgICAgICBbMHgwMCwgMHhBQSwgMHgwMF0sXG4gICAgICAgIFsweDAwLCAweDY2LCAweDAwXSxcbiAgICAgICAgWzB4NjYsIDB4MzMsIDB4MDBdLFxuICAgICAgICBbMHg5OSwgMHg2NiwgMHgzM10sXG4gICAgICAgIFsweEJCLCAweEJCLCAweEJCXSxcbiAgICAgICAgWzB4ODgsIDB4ODgsIDB4ODhdLFxuICAgICAgICBbMHg0NCwgMHg0NCwgMHg0NF0sXG4gICAgICAgIFsweDAwLCAweDAwLCAweDAwXSAvLyBCbGFja1xuICAgIF1cbn07XG5leHBvcnQgZGVmYXVsdCBNYWNpbnRvc2g0YjtcbiJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./src/palette/Macintosh4b.ts\n");

/***/ }),

/***/ "./src/palette/Mono.ts":
/*!*****************************!*\
  !*** ./src/palette/Mono.ts ***!
  \*****************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"MonoW\": () => (/* binding */ MonoW),\n/* harmony export */   \"MonoG\": () => (/* binding */ MonoG),\n/* harmony export */   \"MonoA\": () => (/* binding */ MonoA)\n/* harmony export */ });\n/* harmony import */ var _PaletteGroups__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../PaletteGroups */ \"./src/PaletteGroups.ts\");\n\nconst MonoW = {\n    name: 'Black/White (1-bit MC)',\n    type: _PaletteGroups__WEBPACK_IMPORTED_MODULE_0__.default.PMono,\n    useAlpha: false,\n    data: [\n        [0, 0, 0],\n        [255, 255, 255]\n    ]\n};\nconst MonoG = {\n    name: 'Black/Green (1-bit MC)',\n    type: _PaletteGroups__WEBPACK_IMPORTED_MODULE_0__.default.PMono,\n    useAlpha: false,\n    data: [\n        [0, 0, 0],\n        [0, 255, 0]\n    ]\n};\nconst MonoA = {\n    name: 'Black/Amber (1-bit MC)',\n    type: _PaletteGroups__WEBPACK_IMPORTED_MODULE_0__.default.PMono,\n    useAlpha: false,\n    data: [\n        [0, 0, 0],\n        [255, 200, 15]\n    ]\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9pbWFnZWJpdGRlcHRoLy4vc3JjL3BhbGV0dGUvTW9uby50cz82MTlmIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7Ozs7QUFBMkM7QUFDcEM7QUFDUDtBQUNBLFVBQVUseURBQWlCO0FBQzNCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNPO0FBQ1A7QUFDQSxVQUFVLHlEQUFpQjtBQUMzQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDTztBQUNQO0FBQ0EsVUFBVSx5REFBaUI7QUFDM0I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBIiwiZmlsZSI6Ii4vc3JjL3BhbGV0dGUvTW9uby50cy5qcyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBQYWxldHRlVHlwZSBmcm9tIFwiLi4vUGFsZXR0ZUdyb3Vwc1wiO1xuZXhwb3J0IGNvbnN0IE1vbm9XID0ge1xuICAgIG5hbWU6ICdCbGFjay9XaGl0ZSAoMS1iaXQgTUMpJyxcbiAgICB0eXBlOiBQYWxldHRlVHlwZS5QTW9ubyxcbiAgICB1c2VBbHBoYTogZmFsc2UsXG4gICAgZGF0YTogW1xuICAgICAgICBbMCwgMCwgMF0sXG4gICAgICAgIFsyNTUsIDI1NSwgMjU1XVxuICAgIF1cbn07XG5leHBvcnQgY29uc3QgTW9ub0cgPSB7XG4gICAgbmFtZTogJ0JsYWNrL0dyZWVuICgxLWJpdCBNQyknLFxuICAgIHR5cGU6IFBhbGV0dGVUeXBlLlBNb25vLFxuICAgIHVzZUFscGhhOiBmYWxzZSxcbiAgICBkYXRhOiBbXG4gICAgICAgIFswLCAwLCAwXSxcbiAgICAgICAgWzAsIDI1NSwgMF1cbiAgICBdXG59O1xuZXhwb3J0IGNvbnN0IE1vbm9BID0ge1xuICAgIG5hbWU6ICdCbGFjay9BbWJlciAoMS1iaXQgTUMpJyxcbiAgICB0eXBlOiBQYWxldHRlVHlwZS5QTW9ubyxcbiAgICB1c2VBbHBoYTogZmFsc2UsXG4gICAgZGF0YTogW1xuICAgICAgICBbMCwgMCwgMF0sXG4gICAgICAgIFsyNTUsIDIwMCwgMTVdXG4gICAgXVxufTtcbiJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./src/palette/Mono.ts\n");

/***/ }),

/***/ "./src/palette/RGB.ts":
/*!****************************!*\
  !*** ./src/palette/RGB.ts ***!
  \****************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"RGB8\": () => (/* binding */ RGB8),\n/* harmony export */   \"RGB64\": () => (/* binding */ RGB64),\n/* harmony export */   \"RGB256\": () => (/* binding */ RGB256)\n/* harmony export */ });\n/* harmony import */ var _PaletteGroups__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../PaletteGroups */ \"./src/PaletteGroups.ts\");\n\nconst RGB8 = {\n    name: '8-color RGB (3-bit, 1bpc)',\n    type: _PaletteGroups__WEBPACK_IMPORTED_MODULE_0__.default.PRGB,\n    useAlpha: false,\n    data: [[1, 1, 1]]\n};\nconst RGB64 = {\n    name: '64-color RGB (6-bit, 2bpc)',\n    type: _PaletteGroups__WEBPACK_IMPORTED_MODULE_0__.default.PRGB,\n    useAlpha: false,\n    data: [[2, 2, 2]]\n};\nconst RGB256 = {\n    name: '256-color RGB (8-bit, 3-3-2)',\n    type: _PaletteGroups__WEBPACK_IMPORTED_MODULE_0__.default.PRGB,\n    useAlpha: false,\n    data: [[3, 3, 2]]\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9pbWFnZWJpdGRlcHRoLy4vc3JjL3BhbGV0dGUvUkdCLnRzPzUzOTQiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7Ozs7OztBQUEyQztBQUNwQztBQUNQO0FBQ0EsVUFBVSx3REFBZ0I7QUFDMUI7QUFDQTtBQUNBO0FBQ087QUFDUDtBQUNBLFVBQVUsd0RBQWdCO0FBQzFCO0FBQ0E7QUFDQTtBQUNPO0FBQ1A7QUFDQSxVQUFVLHdEQUFnQjtBQUMxQjtBQUNBO0FBQ0EiLCJmaWxlIjoiLi9zcmMvcGFsZXR0ZS9SR0IudHMuanMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgUGFsZXR0ZVR5cGUgZnJvbSBcIi4uL1BhbGV0dGVHcm91cHNcIjtcbmV4cG9ydCBjb25zdCBSR0I4ID0ge1xuICAgIG5hbWU6ICc4LWNvbG9yIFJHQiAoMy1iaXQsIDFicGMpJyxcbiAgICB0eXBlOiBQYWxldHRlVHlwZS5QUkdCLFxuICAgIHVzZUFscGhhOiBmYWxzZSxcbiAgICBkYXRhOiBbWzEsIDEsIDFdXVxufTtcbmV4cG9ydCBjb25zdCBSR0I2NCA9IHtcbiAgICBuYW1lOiAnNjQtY29sb3IgUkdCICg2LWJpdCwgMmJwYyknLFxuICAgIHR5cGU6IFBhbGV0dGVUeXBlLlBSR0IsXG4gICAgdXNlQWxwaGE6IGZhbHNlLFxuICAgIGRhdGE6IFtbMiwgMiwgMl1dXG59O1xuZXhwb3J0IGNvbnN0IFJHQjI1NiA9IHtcbiAgICBuYW1lOiAnMjU2LWNvbG9yIFJHQiAoOC1iaXQsIDMtMy0yKScsXG4gICAgdHlwZTogUGFsZXR0ZVR5cGUuUFJHQixcbiAgICB1c2VBbHBoYTogZmFsc2UsXG4gICAgZGF0YTogW1szLCAzLCAyXV1cbn07XG4iXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./src/palette/RGB.ts\n");

/***/ }),

/***/ "./src/palette/Win20cEx.ts":
/*!*********************************!*\
  !*** ./src/palette/Win20cEx.ts ***!
  \*********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var _PaletteGroups__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../PaletteGroups */ \"./src/PaletteGroups.ts\");\n\nconst Win20cEx = {\n    name: 'Windows 20-color Extended RGBI',\n    type: _PaletteGroups__WEBPACK_IMPORTED_MODULE_0__.default.P4BitIndexed,\n    useAlpha: false,\n    data: [\n        [0x00, 0x00, 0x00],\n        [0x00, 0x00, 0x80],\n        [0x00, 0x80, 0x00],\n        [0x00, 0x80, 0x80],\n        [0x80, 0x00, 0x00],\n        [0x80, 0x00, 0x80],\n        [0x80, 0x80, 0x00],\n        [0xC0, 0xC0, 0xC0],\n        [0xC0, 0xDC, 0xC0],\n        [0xA6, 0xCA, 0xF0],\n        [0xFF, 0xFB, 0xF0],\n        [0xA0, 0xA0, 0xA4],\n        [0x80, 0x80, 0x80],\n        [0x00, 0x00, 0xFF],\n        [0x00, 0xFF, 0x00],\n        [0x00, 0xFF, 0xFF],\n        [0xFF, 0x00, 0x00],\n        [0xFF, 0x00, 0xFF],\n        [0xFF, 0xFF, 0x00],\n        [0xFF, 0xFF, 0xFF] // White\n    ]\n};\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (Win20cEx);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9pbWFnZWJpdGRlcHRoLy4vc3JjL3BhbGV0dGUvV2luMjBjRXgudHM/MGU4OCJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7OztBQUEyQztBQUMzQztBQUNBO0FBQ0EsVUFBVSxnRUFBd0I7QUFDbEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUVBQWUsUUFBUSxFQUFDIiwiZmlsZSI6Ii4vc3JjL3BhbGV0dGUvV2luMjBjRXgudHMuanMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgUGFsZXR0ZVR5cGUgZnJvbSBcIi4uL1BhbGV0dGVHcm91cHNcIjtcbmNvbnN0IFdpbjIwY0V4ID0ge1xuICAgIG5hbWU6ICdXaW5kb3dzIDIwLWNvbG9yIEV4dGVuZGVkIFJHQkknLFxuICAgIHR5cGU6IFBhbGV0dGVUeXBlLlA0Qml0SW5kZXhlZCxcbiAgICB1c2VBbHBoYTogZmFsc2UsXG4gICAgZGF0YTogW1xuICAgICAgICBbMHgwMCwgMHgwMCwgMHgwMF0sXG4gICAgICAgIFsweDAwLCAweDAwLCAweDgwXSxcbiAgICAgICAgWzB4MDAsIDB4ODAsIDB4MDBdLFxuICAgICAgICBbMHgwMCwgMHg4MCwgMHg4MF0sXG4gICAgICAgIFsweDgwLCAweDAwLCAweDAwXSxcbiAgICAgICAgWzB4ODAsIDB4MDAsIDB4ODBdLFxuICAgICAgICBbMHg4MCwgMHg4MCwgMHgwMF0sXG4gICAgICAgIFsweEMwLCAweEMwLCAweEMwXSxcbiAgICAgICAgWzB4QzAsIDB4REMsIDB4QzBdLFxuICAgICAgICBbMHhBNiwgMHhDQSwgMHhGMF0sXG4gICAgICAgIFsweEZGLCAweEZCLCAweEYwXSxcbiAgICAgICAgWzB4QTAsIDB4QTAsIDB4QTRdLFxuICAgICAgICBbMHg4MCwgMHg4MCwgMHg4MF0sXG4gICAgICAgIFsweDAwLCAweDAwLCAweEZGXSxcbiAgICAgICAgWzB4MDAsIDB4RkYsIDB4MDBdLFxuICAgICAgICBbMHgwMCwgMHhGRiwgMHhGRl0sXG4gICAgICAgIFsweEZGLCAweDAwLCAweDAwXSxcbiAgICAgICAgWzB4RkYsIDB4MDAsIDB4RkZdLFxuICAgICAgICBbMHhGRiwgMHhGRiwgMHgwMF0sXG4gICAgICAgIFsweEZGLCAweEZGLCAweEZGXSAvLyBXaGl0ZVxuICAgIF1cbn07XG5leHBvcnQgZGVmYXVsdCBXaW4yMGNFeDtcbiJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./src/palette/Win20cEx.ts\n");

/***/ }),

/***/ "./src/palette/Win4bRGBI.ts":
/*!**********************************!*\
  !*** ./src/palette/Win4bRGBI.ts ***!
  \**********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var _PaletteGroups__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../PaletteGroups */ \"./src/PaletteGroups.ts\");\n\nconst Win4bRGBI = {\n    name: 'Windows 4-bit RGBI',\n    type: _PaletteGroups__WEBPACK_IMPORTED_MODULE_0__.default.P4BitRGBI,\n    useAlpha: false,\n    data: [\n        [0x00, 0x00, 0x00],\n        [0x00, 0x00, 0x80],\n        [0x00, 0x80, 0x00],\n        [0x00, 0x80, 0x80],\n        [0x80, 0x00, 0x00],\n        [0x80, 0x00, 0x80],\n        [0x80, 0x80, 0x00],\n        [0xC0, 0xC0, 0xC0],\n        [0x80, 0x80, 0x80],\n        [0x00, 0x00, 0xFF],\n        [0x00, 0xFF, 0x00],\n        [0x00, 0xFF, 0xFF],\n        [0xFF, 0x00, 0x00],\n        [0xFF, 0x00, 0xFF],\n        [0xFF, 0xFF, 0x00],\n        [0xFF, 0xFF, 0xFF] // White\n    ]\n};\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (Win4bRGBI);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9pbWFnZWJpdGRlcHRoLy4vc3JjL3BhbGV0dGUvV2luNGJSR0JJLnRzP2NhOTUiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7Ozs7QUFBMkM7QUFDM0M7QUFDQTtBQUNBLFVBQVUsNkRBQXFCO0FBQy9CO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpRUFBZSxTQUFTLEVBQUMiLCJmaWxlIjoiLi9zcmMvcGFsZXR0ZS9XaW40YlJHQkkudHMuanMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgUGFsZXR0ZVR5cGUgZnJvbSBcIi4uL1BhbGV0dGVHcm91cHNcIjtcbmNvbnN0IFdpbjRiUkdCSSA9IHtcbiAgICBuYW1lOiAnV2luZG93cyA0LWJpdCBSR0JJJyxcbiAgICB0eXBlOiBQYWxldHRlVHlwZS5QNEJpdFJHQkksXG4gICAgdXNlQWxwaGE6IGZhbHNlLFxuICAgIGRhdGE6IFtcbiAgICAgICAgWzB4MDAsIDB4MDAsIDB4MDBdLFxuICAgICAgICBbMHgwMCwgMHgwMCwgMHg4MF0sXG4gICAgICAgIFsweDAwLCAweDgwLCAweDAwXSxcbiAgICAgICAgWzB4MDAsIDB4ODAsIDB4ODBdLFxuICAgICAgICBbMHg4MCwgMHgwMCwgMHgwMF0sXG4gICAgICAgIFsweDgwLCAweDAwLCAweDgwXSxcbiAgICAgICAgWzB4ODAsIDB4ODAsIDB4MDBdLFxuICAgICAgICBbMHhDMCwgMHhDMCwgMHhDMF0sXG4gICAgICAgIFsweDgwLCAweDgwLCAweDgwXSxcbiAgICAgICAgWzB4MDAsIDB4MDAsIDB4RkZdLFxuICAgICAgICBbMHgwMCwgMHhGRiwgMHgwMF0sXG4gICAgICAgIFsweDAwLCAweEZGLCAweEZGXSxcbiAgICAgICAgWzB4RkYsIDB4MDAsIDB4MDBdLFxuICAgICAgICBbMHhGRiwgMHgwMCwgMHhGRl0sXG4gICAgICAgIFsweEZGLCAweEZGLCAweDAwXSxcbiAgICAgICAgWzB4RkYsIDB4RkYsIDB4RkZdIC8vIFdoaXRlXG4gICAgXVxufTtcbmV4cG9ydCBkZWZhdWx0IFdpbjRiUkdCSTtcbiJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./src/palette/Win4bRGBI.ts\n");

/***/ }),

/***/ "./src/palette/ZX4bRGBI.ts":
/*!*********************************!*\
  !*** ./src/palette/ZX4bRGBI.ts ***!
  \*********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var _PaletteGroups__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../PaletteGroups */ \"./src/PaletteGroups.ts\");\n\nconst ZX4bRGBI = {\n    name: 'ZX Spectrum 4-bit RGBI',\n    type: _PaletteGroups__WEBPACK_IMPORTED_MODULE_0__.default.P4BitRGBI,\n    useAlpha: false,\n    data: [\n        [0x00, 0x00, 0x00],\n        [0x00, 0x00, 0xD7],\n        [0x00, 0xD7, 0x00],\n        [0x00, 0xD7, 0xD7],\n        [0xD7, 0x00, 0x00],\n        [0xD7, 0x00, 0xD7],\n        [0xD7, 0xD7, 0x00],\n        [0xD7, 0xD7, 0xD7],\n        [0x00, 0x00, 0xFF],\n        [0x00, 0xFF, 0x00],\n        [0x00, 0xFF, 0xFF],\n        [0xFF, 0x00, 0x00],\n        [0xFF, 0x00, 0xFF],\n        [0xFF, 0xFF, 0x00],\n        [0xFF, 0xFF, 0xFF] // Bright White\n    ]\n};\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (ZX4bRGBI);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9pbWFnZWJpdGRlcHRoLy4vc3JjL3BhbGV0dGUvWlg0YlJHQkkudHM/N2MwZCJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7OztBQUEyQztBQUMzQztBQUNBO0FBQ0EsVUFBVSw2REFBcUI7QUFDL0I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpRUFBZSxRQUFRLEVBQUMiLCJmaWxlIjoiLi9zcmMvcGFsZXR0ZS9aWDRiUkdCSS50cy5qcyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBQYWxldHRlVHlwZSBmcm9tIFwiLi4vUGFsZXR0ZUdyb3Vwc1wiO1xuY29uc3QgWlg0YlJHQkkgPSB7XG4gICAgbmFtZTogJ1pYIFNwZWN0cnVtIDQtYml0IFJHQkknLFxuICAgIHR5cGU6IFBhbGV0dGVUeXBlLlA0Qml0UkdCSSxcbiAgICB1c2VBbHBoYTogZmFsc2UsXG4gICAgZGF0YTogW1xuICAgICAgICBbMHgwMCwgMHgwMCwgMHgwMF0sXG4gICAgICAgIFsweDAwLCAweDAwLCAweEQ3XSxcbiAgICAgICAgWzB4MDAsIDB4RDcsIDB4MDBdLFxuICAgICAgICBbMHgwMCwgMHhENywgMHhEN10sXG4gICAgICAgIFsweEQ3LCAweDAwLCAweDAwXSxcbiAgICAgICAgWzB4RDcsIDB4MDAsIDB4RDddLFxuICAgICAgICBbMHhENywgMHhENywgMHgwMF0sXG4gICAgICAgIFsweEQ3LCAweEQ3LCAweEQ3XSxcbiAgICAgICAgWzB4MDAsIDB4MDAsIDB4RkZdLFxuICAgICAgICBbMHgwMCwgMHhGRiwgMHgwMF0sXG4gICAgICAgIFsweDAwLCAweEZGLCAweEZGXSxcbiAgICAgICAgWzB4RkYsIDB4MDAsIDB4MDBdLFxuICAgICAgICBbMHhGRiwgMHgwMCwgMHhGRl0sXG4gICAgICAgIFsweEZGLCAweEZGLCAweDAwXSxcbiAgICAgICAgWzB4RkYsIDB4RkYsIDB4RkZdIC8vIEJyaWdodCBXaGl0ZVxuICAgIF1cbn07XG5leHBvcnQgZGVmYXVsdCBaWDRiUkdCSTtcbiJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./src/palette/ZX4bRGBI.ts\n");

/***/ }),

/***/ "./src/scratchpad.ts":
/*!***************************!*\
  !*** ./src/scratchpad.ts ***!
  \***************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"ColorOctree\": () => (/* binding */ ColorOctree),\n/* harmony export */   \"getPalette\": () => (/* binding */ getPalette)\n/* harmony export */ });\n/* harmony import */ var _PaletteGroups__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./PaletteGroups */ \"./src/PaletteGroups.ts\");\n\nclass ColorNode {\n    constructor() {\n        this.colors = [];\n        this.pixels = 0;\n    }\n    get pixelCount() { return this.pixels; }\n    get avgColor() {\n        const sum = [0, 0, 0];\n        for (let i = 0; i < this.colors.length; i++)\n            for (let j = 0; j < 3; j++)\n                sum[j] += this.colors[i][j];\n        return sum.map(v => v / this.colors.length);\n    }\n    addColor(color) {\n        // If the specific color isn't in the list, add it\n        // Either way, increase the pixel count by one\n        if (!this.colors.includes(color))\n            this.colors.push(color);\n        this.pixels++;\n    }\n}\nfunction makeTree(levels) {\n    return Array.from({ length: Math.pow(8, levels) }, () => new ColorNode());\n}\nclass ColorOctree {\n    constructor(opts) {\n        this.generated = false;\n        this.levels = opts.levels;\n        this.tree = makeTree(opts.levels);\n        this.ctes = [];\n        this.reservedLevel = opts.reservedLevel;\n        this.nColors = opts.numColors;\n        this.k = opts.inclThresholdCoeff || 1;\n    }\n    // Add a color to the appropriate leaf node (octcube)\n    // Returns the index of the leaf node the color was added to\n    addColor(color) {\n        if (this.generated)\n            throw new Error('Attempting to modify a generated palette');\n        const i = this.index(color);\n        this.tree[i].addColor(color);\n        return i;\n    }\n    getPalette() {\n        if (!this.generated)\n            this.generate();\n        const colors = [];\n        this.ctes.forEach(cte => {\n            const index = cte.index;\n            const color = [0, 0, 0];\n            for (let n = 0; n < cte.level; n++) {\n                for (let i = 2; i >= 0; i--) {\n                    const bit = (cte.level - 1 - n) * 3 + i;\n                    const mask = (0x1 << (cte.level * 3 - 1)) >> (n * 3 + (2 - i));\n                    color[2 - i] = (color[2 - i] << 1) | ((index & mask) >> bit);\n                }\n            }\n            for (let n = cte.level; n < 8; n++)\n                for (let i = 0; i < 3; i++)\n                    color[i] = (color[i] << 1) | (n === cte.level ? 0x1 : 0x0);\n            colors.push(color);\n            //colors.push(cte.node.avgColor);\n        });\n        console.log(`Built palette with ${colors.length} colors`);\n        return colors;\n    }\n    // Returns an index for the virtual octree at level (N)\n    // By design the octcube (i) at level (n - 1) contains the\n    // octcubes (8i + j; j in 0-7) at level (n)\n    //\n    // In other words, shifting the index at level (n) three \n    // bits to the right yields the index of the color at level (n - 1)\n    index(color) {\n        let index = 0;\n        for (let n = 0; n < this.levels; n++) {\n            const bit = 7 - n;\n            let iLevel = 0;\n            for (let i = 0; i < 3; i++) {\n                // For each channel, get the nth bit starting from the MSB\n                // and combine them in a number in range 1-8\n                // This is our index for the level n (relative to level n-1)\n                const mask = 0x80 >> n;\n                iLevel = (iLevel << 1) | ((color[i] & mask) >> bit);\n            }\n            // Shift the 'global' index by 3 bits and add the new level index\n            // The result is the 'absolute' index of the lowest level octcube\n            // the color fits in\n            index = (index << 3) | iLevel;\n        }\n        return index;\n    }\n    // Returns the properties for any given node\n    // Only leaf nodes are actually stored; for any other node,\n    // a 'fake' node with its properties calculated on the fly\n    // is returned\n    getNode(index, level) {\n        if (level === this.levels)\n            return this.tree[index];\n        const children = [];\n        for (let j = 0; j < 8; j++)\n            if (!this.isCTE(8 * index + j, level + 1))\n                children.push(this.getNode(8 * index + j, level + 1));\n        const fakeNode = children\n            .filter(node => node.pixelCount > 0)\n            .reduce((acc, node) => ({\n            //avgColor: acc.avgColor.map((ch, i) => ch + node.avgColor[i]),\n            pixelCount: acc.pixelCount + node.pixelCount\n        }), { /*avgColor: [0, 0, 0],*/ pixelCount: 0 });\n        // Produce average from the sum of the eight child nodes\n        //fakeNode.avgColor = fakeNode.avgColor.map(ch => ch / 8);\n        //if (fakeNode.avgColor.some(ch => isNaN(ch)))\n        //  console.warn(`broken color @${index}, level ${level}`);\n        return fakeNode;\n    }\n    isCTE(index, level) {\n        return this.ctes.some(cte => cte.index === index && cte.level === level);\n    }\n    markCTE(index, level, node) {\n        this.ctes.push({ index, level, node });\n    }\n    testNode(nCols, nRes, nPix, node) {\n        // Get the number of colors yet to be assigned\n        const unassignedColors = nCols - nRes - this.ctes.length;\n        // Get the total number of pixels sampled and the number\n        // of pixels assigned to some CTE, and subtract to get\n        // the number of pixels left to assign\n        const unassignedPixels = nPix - this.ctes\n            .map(cte => cte.node.pixelCount)\n            .reduce((acc, v) => acc + v, 0);\n        const threshold = unassignedPixels / unassignedColors * this.k;\n        // If the node has more pixels than the number of pixels left\n        // to assign divided by the number of available colors, then\n        // it should get a color in the palette\n        return node.pixelCount > threshold;\n    }\n    get nonReservedCTEs() {\n        return this.ctes.filter(cte => cte.level !== this.reservedLevel).length;\n    }\n    generate() {\n        if (this.generated)\n            throw new Error('This palette has already been generated');\n        this.generated = true;\n        const reserved = this.reservedLevel < 0 ? 0 : Math.pow(8, this.reservedLevel);\n        const sampled = this.getNode(0, 0).pixelCount;\n        let level;\n        let lastIterationCTEs = 0;\n        let stuckCounter = 0;\n        // Repeat until the palette is full!\n        while (this.nColors - reserved - this.nonReservedCTEs > 0) {\n            level = this.levels; // Start at leaf node level\n            // Prune up until the specified level\n            // All colors in that level are then reserved\n            while (level > this.reservedLevel && level > 0) {\n                const nodes = Math.pow(8, level);\n                // Iterate through all nodes in the level\n                for (let i = 0; i < nodes; i++) {\n                    const node = this.getNode(i, level);\n                    // If the node is not yet a CTE, and has enough pixels to be\n                    // one, make it a CTE\n                    if (!this.isCTE(i, level) && this.testNode(this.nColors, reserved, sampled, node))\n                        this.markCTE(i, level, node);\n                    // Every 8th node, check the last 8 nodes\n                    // If any nodes are a CTE, make the parent a CTE UNLESS all 8 nodes are CTEs\n                    if (i % 8 === 7) {\n                        let ctes = 0;\n                        for (let j = i - 7; j <= i; j++)\n                            if (this.isCTE(j, level))\n                                ctes++;\n                        if (ctes > 0 && ctes < 8) {\n                            const iParent = i >> 3;\n                            if (!this.isCTE(iParent, level - 1))\n                                this.markCTE(iParent, level - 1, this.getNode(iParent, level - 1));\n                        }\n                    }\n                    // Stop if the palette is full\n                    if (this.nColors - reserved - this.nonReservedCTEs <= 0) {\n                        console.warn(`Ran out of colors! At node ${i}, level ${level}`);\n                        break;\n                    }\n                }\n                // Stop if the palette is full\n                if (this.nColors - reserved - this.nonReservedCTEs <= 0) {\n                    console.warn(`Ran out of colors! At level ${level}`);\n                    break;\n                }\n                level--;\n            }\n            console.log(`${this.ctes.length} CTEs, ${this.ctes.length - this.nonReservedCTEs} reserved`);\n            if (this.ctes.length === lastIterationCTEs) {\n                this.k = this.k / 2;\n                stuckCounter++;\n                if (stuckCounter >= 5)\n                    break;\n            }\n            lastIterationCTEs = this.ctes.length;\n        }\n        // Finally, handle reserved colors\n        if (this.reservedLevel >= 0) {\n            level = this.reservedLevel;\n            const nodes = Math.pow(8, level);\n            for (let i = 0; i < nodes; i++) {\n                const node = this.getNode(i, level);\n                // If the node is not yet a CTE, make it one\n                if (!this.isCTE(i, level))\n                    this.markCTE(i, level, node);\n            }\n        }\n    }\n}\nfunction getPalette(opts, img) {\n    const octree = new ColorOctree(opts);\n    const size = img.width * img.height * 4;\n    for (let i = 0; i < size; i += 4) {\n        const color = Array.from(img.data.slice(i, i + 4));\n        octree.addColor(color);\n    }\n    const colors = octree.getPalette();\n    return {\n        name: '__GENERATED__',\n        type: _PaletteGroups__WEBPACK_IMPORTED_MODULE_0__.default.POther,\n        useAlpha: false,\n        data: colors\n    };\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9pbWFnZWJpdGRlcHRoLy4vc3JjL3NjcmF0Y2hwYWQudHM/MDc4NSJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7Ozs7QUFBMEM7QUFDMUM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHNCQUFzQixvQkFBb0I7QUFDMUM7QUFDQTtBQUNBLHVCQUF1Qix3QkFBd0I7QUFDL0MsMkJBQTJCLE9BQU87QUFDbEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsdUJBQXVCLDhCQUE4QjtBQUNyRDtBQUNPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwyQkFBMkIsZUFBZTtBQUMxQywrQkFBK0IsUUFBUTtBQUN2QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsbUNBQW1DLE9BQU87QUFDMUMsK0JBQStCLE9BQU87QUFDdEM7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNULDBDQUEwQyxjQUFjO0FBQ3hEO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esd0JBQXdCO0FBQ3hCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx1QkFBdUIsaUJBQWlCO0FBQ3hDO0FBQ0E7QUFDQSwyQkFBMkIsT0FBTztBQUNsQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMkNBQTJDO0FBQzNDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHVCQUF1QixPQUFPO0FBQzlCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUyxJQUFJLHlDQUF5QztBQUN0RDtBQUNBO0FBQ0E7QUFDQSwwQ0FBMEMsTUFBTSxVQUFVLE1BQU07QUFDaEU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esd0JBQXdCLHFCQUFxQjtBQUM3QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxnQ0FBZ0M7QUFDaEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLCtCQUErQixXQUFXO0FBQzFDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDJDQUEyQyxRQUFRO0FBQ25EO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsbUVBQW1FLEVBQUUsVUFBVSxNQUFNO0FBQ3JGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxnRUFBZ0UsTUFBTTtBQUN0RTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDJCQUEyQixpQkFBaUIsU0FBUyx3Q0FBd0M7QUFDN0Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMkJBQTJCLFdBQVc7QUFDdEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNPO0FBQ1A7QUFDQTtBQUNBLG1CQUFtQixVQUFVO0FBQzdCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGNBQWMsMERBQWtCO0FBQ2hDO0FBQ0E7QUFDQTtBQUNBIiwiZmlsZSI6Ii4vc3JjL3NjcmF0Y2hwYWQudHMuanMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgUGFsZXR0ZVR5cGUgZnJvbSBcIi4vUGFsZXR0ZUdyb3Vwc1wiO1xuY2xhc3MgQ29sb3JOb2RlIHtcbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgdGhpcy5jb2xvcnMgPSBbXTtcbiAgICAgICAgdGhpcy5waXhlbHMgPSAwO1xuICAgIH1cbiAgICBnZXQgcGl4ZWxDb3VudCgpIHsgcmV0dXJuIHRoaXMucGl4ZWxzOyB9XG4gICAgZ2V0IGF2Z0NvbG9yKCkge1xuICAgICAgICBjb25zdCBzdW0gPSBbMCwgMCwgMF07XG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5jb2xvcnMubGVuZ3RoOyBpKyspXG4gICAgICAgICAgICBmb3IgKGxldCBqID0gMDsgaiA8IDM7IGorKylcbiAgICAgICAgICAgICAgICBzdW1bal0gKz0gdGhpcy5jb2xvcnNbaV1bal07XG4gICAgICAgIHJldHVybiBzdW0ubWFwKHYgPT4gdiAvIHRoaXMuY29sb3JzLmxlbmd0aCk7XG4gICAgfVxuICAgIGFkZENvbG9yKGNvbG9yKSB7XG4gICAgICAgIC8vIElmIHRoZSBzcGVjaWZpYyBjb2xvciBpc24ndCBpbiB0aGUgbGlzdCwgYWRkIGl0XG4gICAgICAgIC8vIEVpdGhlciB3YXksIGluY3JlYXNlIHRoZSBwaXhlbCBjb3VudCBieSBvbmVcbiAgICAgICAgaWYgKCF0aGlzLmNvbG9ycy5pbmNsdWRlcyhjb2xvcikpXG4gICAgICAgICAgICB0aGlzLmNvbG9ycy5wdXNoKGNvbG9yKTtcbiAgICAgICAgdGhpcy5waXhlbHMrKztcbiAgICB9XG59XG5mdW5jdGlvbiBtYWtlVHJlZShsZXZlbHMpIHtcbiAgICByZXR1cm4gQXJyYXkuZnJvbSh7IGxlbmd0aDogTWF0aC5wb3coOCwgbGV2ZWxzKSB9LCAoKSA9PiBuZXcgQ29sb3JOb2RlKCkpO1xufVxuZXhwb3J0IGNsYXNzIENvbG9yT2N0cmVlIHtcbiAgICBjb25zdHJ1Y3RvcihvcHRzKSB7XG4gICAgICAgIHRoaXMuZ2VuZXJhdGVkID0gZmFsc2U7XG4gICAgICAgIHRoaXMubGV2ZWxzID0gb3B0cy5sZXZlbHM7XG4gICAgICAgIHRoaXMudHJlZSA9IG1ha2VUcmVlKG9wdHMubGV2ZWxzKTtcbiAgICAgICAgdGhpcy5jdGVzID0gW107XG4gICAgICAgIHRoaXMucmVzZXJ2ZWRMZXZlbCA9IG9wdHMucmVzZXJ2ZWRMZXZlbDtcbiAgICAgICAgdGhpcy5uQ29sb3JzID0gb3B0cy5udW1Db2xvcnM7XG4gICAgICAgIHRoaXMuayA9IG9wdHMuaW5jbFRocmVzaG9sZENvZWZmIHx8IDE7XG4gICAgfVxuICAgIC8vIEFkZCBhIGNvbG9yIHRvIHRoZSBhcHByb3ByaWF0ZSBsZWFmIG5vZGUgKG9jdGN1YmUpXG4gICAgLy8gUmV0dXJucyB0aGUgaW5kZXggb2YgdGhlIGxlYWYgbm9kZSB0aGUgY29sb3Igd2FzIGFkZGVkIHRvXG4gICAgYWRkQ29sb3IoY29sb3IpIHtcbiAgICAgICAgaWYgKHRoaXMuZ2VuZXJhdGVkKVxuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdBdHRlbXB0aW5nIHRvIG1vZGlmeSBhIGdlbmVyYXRlZCBwYWxldHRlJyk7XG4gICAgICAgIGNvbnN0IGkgPSB0aGlzLmluZGV4KGNvbG9yKTtcbiAgICAgICAgdGhpcy50cmVlW2ldLmFkZENvbG9yKGNvbG9yKTtcbiAgICAgICAgcmV0dXJuIGk7XG4gICAgfVxuICAgIGdldFBhbGV0dGUoKSB7XG4gICAgICAgIGlmICghdGhpcy5nZW5lcmF0ZWQpXG4gICAgICAgICAgICB0aGlzLmdlbmVyYXRlKCk7XG4gICAgICAgIGNvbnN0IGNvbG9ycyA9IFtdO1xuICAgICAgICB0aGlzLmN0ZXMuZm9yRWFjaChjdGUgPT4ge1xuICAgICAgICAgICAgY29uc3QgaW5kZXggPSBjdGUuaW5kZXg7XG4gICAgICAgICAgICBjb25zdCBjb2xvciA9IFswLCAwLCAwXTtcbiAgICAgICAgICAgIGZvciAobGV0IG4gPSAwOyBuIDwgY3RlLmxldmVsOyBuKyspIHtcbiAgICAgICAgICAgICAgICBmb3IgKGxldCBpID0gMjsgaSA+PSAwOyBpLS0pIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgYml0ID0gKGN0ZS5sZXZlbCAtIDEgLSBuKSAqIDMgKyBpO1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBtYXNrID0gKDB4MSA8PCAoY3RlLmxldmVsICogMyAtIDEpKSA+PiAobiAqIDMgKyAoMiAtIGkpKTtcbiAgICAgICAgICAgICAgICAgICAgY29sb3JbMiAtIGldID0gKGNvbG9yWzIgLSBpXSA8PCAxKSB8ICgoaW5kZXggJiBtYXNrKSA+PiBiaXQpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGZvciAobGV0IG4gPSBjdGUubGV2ZWw7IG4gPCA4OyBuKyspXG4gICAgICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCAzOyBpKyspXG4gICAgICAgICAgICAgICAgICAgIGNvbG9yW2ldID0gKGNvbG9yW2ldIDw8IDEpIHwgKG4gPT09IGN0ZS5sZXZlbCA/IDB4MSA6IDB4MCk7XG4gICAgICAgICAgICBjb2xvcnMucHVzaChjb2xvcik7XG4gICAgICAgICAgICAvL2NvbG9ycy5wdXNoKGN0ZS5ub2RlLmF2Z0NvbG9yKTtcbiAgICAgICAgfSk7XG4gICAgICAgIGNvbnNvbGUubG9nKGBCdWlsdCBwYWxldHRlIHdpdGggJHtjb2xvcnMubGVuZ3RofSBjb2xvcnNgKTtcbiAgICAgICAgcmV0dXJuIGNvbG9ycztcbiAgICB9XG4gICAgLy8gUmV0dXJucyBhbiBpbmRleCBmb3IgdGhlIHZpcnR1YWwgb2N0cmVlIGF0IGxldmVsIChOKVxuICAgIC8vIEJ5IGRlc2lnbiB0aGUgb2N0Y3ViZSAoaSkgYXQgbGV2ZWwgKG4gLSAxKSBjb250YWlucyB0aGVcbiAgICAvLyBvY3RjdWJlcyAoOGkgKyBqOyBqIGluIDAtNykgYXQgbGV2ZWwgKG4pXG4gICAgLy9cbiAgICAvLyBJbiBvdGhlciB3b3Jkcywgc2hpZnRpbmcgdGhlIGluZGV4IGF0IGxldmVsIChuKSB0aHJlZSBcbiAgICAvLyBiaXRzIHRvIHRoZSByaWdodCB5aWVsZHMgdGhlIGluZGV4IG9mIHRoZSBjb2xvciBhdCBsZXZlbCAobiAtIDEpXG4gICAgaW5kZXgoY29sb3IpIHtcbiAgICAgICAgbGV0IGluZGV4ID0gMDtcbiAgICAgICAgZm9yIChsZXQgbiA9IDA7IG4gPCB0aGlzLmxldmVsczsgbisrKSB7XG4gICAgICAgICAgICBjb25zdCBiaXQgPSA3IC0gbjtcbiAgICAgICAgICAgIGxldCBpTGV2ZWwgPSAwO1xuICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCAzOyBpKyspIHtcbiAgICAgICAgICAgICAgICAvLyBGb3IgZWFjaCBjaGFubmVsLCBnZXQgdGhlIG50aCBiaXQgc3RhcnRpbmcgZnJvbSB0aGUgTVNCXG4gICAgICAgICAgICAgICAgLy8gYW5kIGNvbWJpbmUgdGhlbSBpbiBhIG51bWJlciBpbiByYW5nZSAxLThcbiAgICAgICAgICAgICAgICAvLyBUaGlzIGlzIG91ciBpbmRleCBmb3IgdGhlIGxldmVsIG4gKHJlbGF0aXZlIHRvIGxldmVsIG4tMSlcbiAgICAgICAgICAgICAgICBjb25zdCBtYXNrID0gMHg4MCA+PiBuO1xuICAgICAgICAgICAgICAgIGlMZXZlbCA9IChpTGV2ZWwgPDwgMSkgfCAoKGNvbG9yW2ldICYgbWFzaykgPj4gYml0KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vIFNoaWZ0IHRoZSAnZ2xvYmFsJyBpbmRleCBieSAzIGJpdHMgYW5kIGFkZCB0aGUgbmV3IGxldmVsIGluZGV4XG4gICAgICAgICAgICAvLyBUaGUgcmVzdWx0IGlzIHRoZSAnYWJzb2x1dGUnIGluZGV4IG9mIHRoZSBsb3dlc3QgbGV2ZWwgb2N0Y3ViZVxuICAgICAgICAgICAgLy8gdGhlIGNvbG9yIGZpdHMgaW5cbiAgICAgICAgICAgIGluZGV4ID0gKGluZGV4IDw8IDMpIHwgaUxldmVsO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBpbmRleDtcbiAgICB9XG4gICAgLy8gUmV0dXJucyB0aGUgcHJvcGVydGllcyBmb3IgYW55IGdpdmVuIG5vZGVcbiAgICAvLyBPbmx5IGxlYWYgbm9kZXMgYXJlIGFjdHVhbGx5IHN0b3JlZDsgZm9yIGFueSBvdGhlciBub2RlLFxuICAgIC8vIGEgJ2Zha2UnIG5vZGUgd2l0aCBpdHMgcHJvcGVydGllcyBjYWxjdWxhdGVkIG9uIHRoZSBmbHlcbiAgICAvLyBpcyByZXR1cm5lZFxuICAgIGdldE5vZGUoaW5kZXgsIGxldmVsKSB7XG4gICAgICAgIGlmIChsZXZlbCA9PT0gdGhpcy5sZXZlbHMpXG4gICAgICAgICAgICByZXR1cm4gdGhpcy50cmVlW2luZGV4XTtcbiAgICAgICAgY29uc3QgY2hpbGRyZW4gPSBbXTtcbiAgICAgICAgZm9yIChsZXQgaiA9IDA7IGogPCA4OyBqKyspXG4gICAgICAgICAgICBpZiAoIXRoaXMuaXNDVEUoOCAqIGluZGV4ICsgaiwgbGV2ZWwgKyAxKSlcbiAgICAgICAgICAgICAgICBjaGlsZHJlbi5wdXNoKHRoaXMuZ2V0Tm9kZSg4ICogaW5kZXggKyBqLCBsZXZlbCArIDEpKTtcbiAgICAgICAgY29uc3QgZmFrZU5vZGUgPSBjaGlsZHJlblxuICAgICAgICAgICAgLmZpbHRlcihub2RlID0+IG5vZGUucGl4ZWxDb3VudCA+IDApXG4gICAgICAgICAgICAucmVkdWNlKChhY2MsIG5vZGUpID0+ICh7XG4gICAgICAgICAgICAvL2F2Z0NvbG9yOiBhY2MuYXZnQ29sb3IubWFwKChjaCwgaSkgPT4gY2ggKyBub2RlLmF2Z0NvbG9yW2ldKSxcbiAgICAgICAgICAgIHBpeGVsQ291bnQ6IGFjYy5waXhlbENvdW50ICsgbm9kZS5waXhlbENvdW50XG4gICAgICAgIH0pLCB7IC8qYXZnQ29sb3I6IFswLCAwLCAwXSwqLyBwaXhlbENvdW50OiAwIH0pO1xuICAgICAgICAvLyBQcm9kdWNlIGF2ZXJhZ2UgZnJvbSB0aGUgc3VtIG9mIHRoZSBlaWdodCBjaGlsZCBub2Rlc1xuICAgICAgICAvL2Zha2VOb2RlLmF2Z0NvbG9yID0gZmFrZU5vZGUuYXZnQ29sb3IubWFwKGNoID0+IGNoIC8gOCk7XG4gICAgICAgIC8vaWYgKGZha2VOb2RlLmF2Z0NvbG9yLnNvbWUoY2ggPT4gaXNOYU4oY2gpKSlcbiAgICAgICAgLy8gIGNvbnNvbGUud2FybihgYnJva2VuIGNvbG9yIEAke2luZGV4fSwgbGV2ZWwgJHtsZXZlbH1gKTtcbiAgICAgICAgcmV0dXJuIGZha2VOb2RlO1xuICAgIH1cbiAgICBpc0NURShpbmRleCwgbGV2ZWwpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuY3Rlcy5zb21lKGN0ZSA9PiBjdGUuaW5kZXggPT09IGluZGV4ICYmIGN0ZS5sZXZlbCA9PT0gbGV2ZWwpO1xuICAgIH1cbiAgICBtYXJrQ1RFKGluZGV4LCBsZXZlbCwgbm9kZSkge1xuICAgICAgICB0aGlzLmN0ZXMucHVzaCh7IGluZGV4LCBsZXZlbCwgbm9kZSB9KTtcbiAgICB9XG4gICAgdGVzdE5vZGUobkNvbHMsIG5SZXMsIG5QaXgsIG5vZGUpIHtcbiAgICAgICAgLy8gR2V0IHRoZSBudW1iZXIgb2YgY29sb3JzIHlldCB0byBiZSBhc3NpZ25lZFxuICAgICAgICBjb25zdCB1bmFzc2lnbmVkQ29sb3JzID0gbkNvbHMgLSBuUmVzIC0gdGhpcy5jdGVzLmxlbmd0aDtcbiAgICAgICAgLy8gR2V0IHRoZSB0b3RhbCBudW1iZXIgb2YgcGl4ZWxzIHNhbXBsZWQgYW5kIHRoZSBudW1iZXJcbiAgICAgICAgLy8gb2YgcGl4ZWxzIGFzc2lnbmVkIHRvIHNvbWUgQ1RFLCBhbmQgc3VidHJhY3QgdG8gZ2V0XG4gICAgICAgIC8vIHRoZSBudW1iZXIgb2YgcGl4ZWxzIGxlZnQgdG8gYXNzaWduXG4gICAgICAgIGNvbnN0IHVuYXNzaWduZWRQaXhlbHMgPSBuUGl4IC0gdGhpcy5jdGVzXG4gICAgICAgICAgICAubWFwKGN0ZSA9PiBjdGUubm9kZS5waXhlbENvdW50KVxuICAgICAgICAgICAgLnJlZHVjZSgoYWNjLCB2KSA9PiBhY2MgKyB2LCAwKTtcbiAgICAgICAgY29uc3QgdGhyZXNob2xkID0gdW5hc3NpZ25lZFBpeGVscyAvIHVuYXNzaWduZWRDb2xvcnMgKiB0aGlzLms7XG4gICAgICAgIC8vIElmIHRoZSBub2RlIGhhcyBtb3JlIHBpeGVscyB0aGFuIHRoZSBudW1iZXIgb2YgcGl4ZWxzIGxlZnRcbiAgICAgICAgLy8gdG8gYXNzaWduIGRpdmlkZWQgYnkgdGhlIG51bWJlciBvZiBhdmFpbGFibGUgY29sb3JzLCB0aGVuXG4gICAgICAgIC8vIGl0IHNob3VsZCBnZXQgYSBjb2xvciBpbiB0aGUgcGFsZXR0ZVxuICAgICAgICByZXR1cm4gbm9kZS5waXhlbENvdW50ID4gdGhyZXNob2xkO1xuICAgIH1cbiAgICBnZXQgbm9uUmVzZXJ2ZWRDVEVzKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5jdGVzLmZpbHRlcihjdGUgPT4gY3RlLmxldmVsICE9PSB0aGlzLnJlc2VydmVkTGV2ZWwpLmxlbmd0aDtcbiAgICB9XG4gICAgZ2VuZXJhdGUoKSB7XG4gICAgICAgIGlmICh0aGlzLmdlbmVyYXRlZClcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignVGhpcyBwYWxldHRlIGhhcyBhbHJlYWR5IGJlZW4gZ2VuZXJhdGVkJyk7XG4gICAgICAgIHRoaXMuZ2VuZXJhdGVkID0gdHJ1ZTtcbiAgICAgICAgY29uc3QgcmVzZXJ2ZWQgPSB0aGlzLnJlc2VydmVkTGV2ZWwgPCAwID8gMCA6IE1hdGgucG93KDgsIHRoaXMucmVzZXJ2ZWRMZXZlbCk7XG4gICAgICAgIGNvbnN0IHNhbXBsZWQgPSB0aGlzLmdldE5vZGUoMCwgMCkucGl4ZWxDb3VudDtcbiAgICAgICAgbGV0IGxldmVsO1xuICAgICAgICBsZXQgbGFzdEl0ZXJhdGlvbkNURXMgPSAwO1xuICAgICAgICBsZXQgc3R1Y2tDb3VudGVyID0gMDtcbiAgICAgICAgLy8gUmVwZWF0IHVudGlsIHRoZSBwYWxldHRlIGlzIGZ1bGwhXG4gICAgICAgIHdoaWxlICh0aGlzLm5Db2xvcnMgLSByZXNlcnZlZCAtIHRoaXMubm9uUmVzZXJ2ZWRDVEVzID4gMCkge1xuICAgICAgICAgICAgbGV2ZWwgPSB0aGlzLmxldmVsczsgLy8gU3RhcnQgYXQgbGVhZiBub2RlIGxldmVsXG4gICAgICAgICAgICAvLyBQcnVuZSB1cCB1bnRpbCB0aGUgc3BlY2lmaWVkIGxldmVsXG4gICAgICAgICAgICAvLyBBbGwgY29sb3JzIGluIHRoYXQgbGV2ZWwgYXJlIHRoZW4gcmVzZXJ2ZWRcbiAgICAgICAgICAgIHdoaWxlIChsZXZlbCA+IHRoaXMucmVzZXJ2ZWRMZXZlbCAmJiBsZXZlbCA+IDApIHtcbiAgICAgICAgICAgICAgICBjb25zdCBub2RlcyA9IE1hdGgucG93KDgsIGxldmVsKTtcbiAgICAgICAgICAgICAgICAvLyBJdGVyYXRlIHRocm91Z2ggYWxsIG5vZGVzIGluIHRoZSBsZXZlbFxuICAgICAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbm9kZXM7IGkrKykge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBub2RlID0gdGhpcy5nZXROb2RlKGksIGxldmVsKTtcbiAgICAgICAgICAgICAgICAgICAgLy8gSWYgdGhlIG5vZGUgaXMgbm90IHlldCBhIENURSwgYW5kIGhhcyBlbm91Z2ggcGl4ZWxzIHRvIGJlXG4gICAgICAgICAgICAgICAgICAgIC8vIG9uZSwgbWFrZSBpdCBhIENURVxuICAgICAgICAgICAgICAgICAgICBpZiAoIXRoaXMuaXNDVEUoaSwgbGV2ZWwpICYmIHRoaXMudGVzdE5vZGUodGhpcy5uQ29sb3JzLCByZXNlcnZlZCwgc2FtcGxlZCwgbm9kZSkpXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm1hcmtDVEUoaSwgbGV2ZWwsIG5vZGUpO1xuICAgICAgICAgICAgICAgICAgICAvLyBFdmVyeSA4dGggbm9kZSwgY2hlY2sgdGhlIGxhc3QgOCBub2Rlc1xuICAgICAgICAgICAgICAgICAgICAvLyBJZiBhbnkgbm9kZXMgYXJlIGEgQ1RFLCBtYWtlIHRoZSBwYXJlbnQgYSBDVEUgVU5MRVNTIGFsbCA4IG5vZGVzIGFyZSBDVEVzXG4gICAgICAgICAgICAgICAgICAgIGlmIChpICUgOCA9PT0gNykge1xuICAgICAgICAgICAgICAgICAgICAgICAgbGV0IGN0ZXMgPSAwO1xuICAgICAgICAgICAgICAgICAgICAgICAgZm9yIChsZXQgaiA9IGkgLSA3OyBqIDw9IGk7IGorKylcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5pc0NURShqLCBsZXZlbCkpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN0ZXMrKztcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChjdGVzID4gMCAmJiBjdGVzIDwgOCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGlQYXJlbnQgPSBpID4+IDM7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCF0aGlzLmlzQ1RFKGlQYXJlbnQsIGxldmVsIC0gMSkpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubWFya0NURShpUGFyZW50LCBsZXZlbCAtIDEsIHRoaXMuZ2V0Tm9kZShpUGFyZW50LCBsZXZlbCAtIDEpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAvLyBTdG9wIGlmIHRoZSBwYWxldHRlIGlzIGZ1bGxcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMubkNvbG9ycyAtIHJlc2VydmVkIC0gdGhpcy5ub25SZXNlcnZlZENURXMgPD0gMCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS53YXJuKGBSYW4gb3V0IG9mIGNvbG9ycyEgQXQgbm9kZSAke2l9LCBsZXZlbCAke2xldmVsfWApO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgLy8gU3RvcCBpZiB0aGUgcGFsZXR0ZSBpcyBmdWxsXG4gICAgICAgICAgICAgICAgaWYgKHRoaXMubkNvbG9ycyAtIHJlc2VydmVkIC0gdGhpcy5ub25SZXNlcnZlZENURXMgPD0gMCkge1xuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLndhcm4oYFJhbiBvdXQgb2YgY29sb3JzISBBdCBsZXZlbCAke2xldmVsfWApO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgbGV2ZWwtLTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnNvbGUubG9nKGAke3RoaXMuY3Rlcy5sZW5ndGh9IENURXMsICR7dGhpcy5jdGVzLmxlbmd0aCAtIHRoaXMubm9uUmVzZXJ2ZWRDVEVzfSByZXNlcnZlZGApO1xuICAgICAgICAgICAgaWYgKHRoaXMuY3Rlcy5sZW5ndGggPT09IGxhc3RJdGVyYXRpb25DVEVzKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5rID0gdGhpcy5rIC8gMjtcbiAgICAgICAgICAgICAgICBzdHVja0NvdW50ZXIrKztcbiAgICAgICAgICAgICAgICBpZiAoc3R1Y2tDb3VudGVyID49IDUpXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgbGFzdEl0ZXJhdGlvbkNURXMgPSB0aGlzLmN0ZXMubGVuZ3RoO1xuICAgICAgICB9XG4gICAgICAgIC8vIEZpbmFsbHksIGhhbmRsZSByZXNlcnZlZCBjb2xvcnNcbiAgICAgICAgaWYgKHRoaXMucmVzZXJ2ZWRMZXZlbCA+PSAwKSB7XG4gICAgICAgICAgICBsZXZlbCA9IHRoaXMucmVzZXJ2ZWRMZXZlbDtcbiAgICAgICAgICAgIGNvbnN0IG5vZGVzID0gTWF0aC5wb3coOCwgbGV2ZWwpO1xuICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBub2RlczsgaSsrKSB7XG4gICAgICAgICAgICAgICAgY29uc3Qgbm9kZSA9IHRoaXMuZ2V0Tm9kZShpLCBsZXZlbCk7XG4gICAgICAgICAgICAgICAgLy8gSWYgdGhlIG5vZGUgaXMgbm90IHlldCBhIENURSwgbWFrZSBpdCBvbmVcbiAgICAgICAgICAgICAgICBpZiAoIXRoaXMuaXNDVEUoaSwgbGV2ZWwpKVxuICAgICAgICAgICAgICAgICAgICB0aGlzLm1hcmtDVEUoaSwgbGV2ZWwsIG5vZGUpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxufVxuZXhwb3J0IGZ1bmN0aW9uIGdldFBhbGV0dGUob3B0cywgaW1nKSB7XG4gICAgY29uc3Qgb2N0cmVlID0gbmV3IENvbG9yT2N0cmVlKG9wdHMpO1xuICAgIGNvbnN0IHNpemUgPSBpbWcud2lkdGggKiBpbWcuaGVpZ2h0ICogNDtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHNpemU7IGkgKz0gNCkge1xuICAgICAgICBjb25zdCBjb2xvciA9IEFycmF5LmZyb20oaW1nLmRhdGEuc2xpY2UoaSwgaSArIDQpKTtcbiAgICAgICAgb2N0cmVlLmFkZENvbG9yKGNvbG9yKTtcbiAgICB9XG4gICAgY29uc3QgY29sb3JzID0gb2N0cmVlLmdldFBhbGV0dGUoKTtcbiAgICByZXR1cm4ge1xuICAgICAgICBuYW1lOiAnX19HRU5FUkFURURfXycsXG4gICAgICAgIHR5cGU6IFBhbGV0dGVUeXBlLlBPdGhlcixcbiAgICAgICAgdXNlQWxwaGE6IGZhbHNlLFxuICAgICAgICBkYXRhOiBjb2xvcnNcbiAgICB9O1xufVxuIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./src/scratchpad.ts\n");

/***/ }),

/***/ "./src/utils.ts":
/*!**********************!*\
  !*** ./src/utils.ts ***!
  \**********************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"distance2\": () => (/* binding */ distance2),\n/* harmony export */   \"loadFile\": () => (/* binding */ loadFile),\n/* harmony export */   \"convertToPalette\": () => (/* binding */ convertToPalette),\n/* harmony export */   \"isPalette\": () => (/* binding */ isPalette)\n/* harmony export */ });\n/* harmony import */ var _DitherStyle__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./DitherStyle */ \"./src/DitherStyle.ts\");\n/* harmony import */ var _PaletteGroups__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./PaletteGroups */ \"./src/PaletteGroups.ts\");\n/* harmony import */ var _scratchpad__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./scratchpad */ \"./src/scratchpad.ts\");\n\n\n\nfunction distance2(a, b) {\n    let d = 0;\n    for (let i = 0; i < 3; i++)\n        d += (a[i] - b[i]) * (a[i] - b[i]);\n    return d;\n}\nconst loadFile = (e) => {\n    return new Promise((resolve, reject) => {\n        const input = e.target;\n        if (input === null || input === void 0 ? void 0 : input.files) {\n            const file = input.files[0];\n            const img = new Image();\n            img.onload = () => resolve(img);\n            img.src = URL.createObjectURL(file);\n        }\n        else\n            reject();\n    });\n};\n// Default palette mapping\n// Uses a simple distance check\nfunction defPaletteMap(color, palette) {\n    let closest = [];\n    let dMin = Number.POSITIVE_INFINITY;\n    palette.data.forEach(pColor => {\n        const dsq = distance2(color, pColor);\n        if (dsq <= dMin) {\n            closest = pColor;\n            dMin = dsq;\n        }\n    });\n    return closest;\n}\nfunction clampedRGBPaletteMap(color, palette) {\n    const levels = palette.data[0].map(bits => Math.pow(2, bits));\n    const clamped = [...color];\n    for (let i = 0; i < 3; i++) {\n        const segment = Math.floor(color[i] / (256 / levels[i]));\n        clamped[i] = segment * (255 / (levels[i] - 1));\n    }\n    return clamped;\n}\nfunction paletteMap(color, palette) {\n    switch (palette.type) {\n        case _PaletteGroups__WEBPACK_IMPORTED_MODULE_1__.default.PRGB:\n            return clampedRGBPaletteMap(color, palette);\n        default:\n            return defPaletteMap(color, palette);\n    }\n}\nfunction convertToPalette(cvIn, cvOut, palette, dither) {\n    cvOut.width = cvIn.width;\n    cvOut.height = cvIn.height;\n    const ctxIn = cvIn.getContext('2d');\n    if (!ctxIn)\n        throw new Error('Unable to get input context');\n    const ctxOut = cvOut.getContext('2d');\n    if (!ctxOut)\n        throw new Error('Unable to get output context');\n    const imageData = ctxIn.getImageData(0, 0, cvIn.width, cvIn.height);\n    if (!imageData)\n        throw new Error('Unable to get image data from context');\n    // Special handling for certain palettes\n    if (palette.type === _PaletteGroups__WEBPACK_IMPORTED_MODULE_1__.default.PAuto) {\n        const options = {\n            numColors: palette.data[0][0],\n            reservedLevel: palette.data[0][1],\n            levels: palette.data[0][2],\n            inclThresholdCoeff: palette.data[1][0]\n        };\n        // Replace the \"template\" auto palette with the appropriate\n        // palette generated from the image\n        palette = (0,_scratchpad__WEBPACK_IMPORTED_MODULE_2__.getPalette)(options, imageData);\n    }\n    const size = imageData.width * imageData.height * 4;\n    const line = imageData.width * 4;\n    for (let i = 0; i < size; i += 4) {\n        const color = Array.from(imageData.data.slice(i, i + 4));\n        const mapped = paletteMap(color, palette);\n        for (let j = 0; j < 3; j++)\n            imageData.data[i + j] = mapped[j];\n        // Apply Floyd-Steinberg dithering if selected\n        if (dither === _DitherStyle__WEBPACK_IMPORTED_MODULE_0__.default.FloydSteinberg) {\n            const error = color.map((ch, i) => ch - mapped[i]);\n            for (let j = 0; j < 3; j++) {\n                imageData.data[i + 4 + j] += error[j] * 7 / 16;\n                imageData.data[i + line - 4 + j] += error[j] * 3 / 16;\n                imageData.data[i + line + j] += error[j] * 5 / 16;\n                imageData.data[i + line + 4 + j] += error[j] * 1 / 16;\n            }\n        }\n    }\n    ctxOut === null || ctxOut === void 0 ? void 0 : ctxOut.putImageData(imageData, 0, 0);\n}\nfunction isPalette(entry) {\n    return entry.data !== undefined;\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9pbWFnZWJpdGRlcHRoLy4vc3JjL3V0aWxzLnRzP2VlNzMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7OztBQUF3QztBQUNFO0FBQ0E7QUFDbkM7QUFDUDtBQUNBLG1CQUFtQixPQUFPO0FBQzFCO0FBQ0E7QUFDQTtBQUNPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxtQkFBbUIsT0FBTztBQUMxQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWEsd0RBQWdCO0FBQzdCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHlCQUF5Qix5REFBaUI7QUFDMUM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGtCQUFrQix1REFBVTtBQUM1QjtBQUNBO0FBQ0E7QUFDQSxtQkFBbUIsVUFBVTtBQUM3QjtBQUNBO0FBQ0EsdUJBQXVCLE9BQU87QUFDOUI7QUFDQTtBQUNBLHVCQUF1QixnRUFBMEI7QUFDakQ7QUFDQSwyQkFBMkIsT0FBTztBQUNsQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDTztBQUNQO0FBQ0EiLCJmaWxlIjoiLi9zcmMvdXRpbHMudHMuanMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgRGl0aGVyU3R5bGUgZnJvbSBcIi4vRGl0aGVyU3R5bGVcIjtcbmltcG9ydCBQYWxldHRlVHlwZSBmcm9tIFwiLi9QYWxldHRlR3JvdXBzXCI7XG5pbXBvcnQgeyBnZXRQYWxldHRlIH0gZnJvbSBcIi4vc2NyYXRjaHBhZFwiO1xuZXhwb3J0IGZ1bmN0aW9uIGRpc3RhbmNlMihhLCBiKSB7XG4gICAgbGV0IGQgPSAwO1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgMzsgaSsrKVxuICAgICAgICBkICs9IChhW2ldIC0gYltpXSkgKiAoYVtpXSAtIGJbaV0pO1xuICAgIHJldHVybiBkO1xufVxuZXhwb3J0IGNvbnN0IGxvYWRGaWxlID0gKGUpID0+IHtcbiAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgICAgICBjb25zdCBpbnB1dCA9IGUudGFyZ2V0O1xuICAgICAgICBpZiAoaW5wdXQgPT09IG51bGwgfHwgaW5wdXQgPT09IHZvaWQgMCA/IHZvaWQgMCA6IGlucHV0LmZpbGVzKSB7XG4gICAgICAgICAgICBjb25zdCBmaWxlID0gaW5wdXQuZmlsZXNbMF07XG4gICAgICAgICAgICBjb25zdCBpbWcgPSBuZXcgSW1hZ2UoKTtcbiAgICAgICAgICAgIGltZy5vbmxvYWQgPSAoKSA9PiByZXNvbHZlKGltZyk7XG4gICAgICAgICAgICBpbWcuc3JjID0gVVJMLmNyZWF0ZU9iamVjdFVSTChmaWxlKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlXG4gICAgICAgICAgICByZWplY3QoKTtcbiAgICB9KTtcbn07XG4vLyBEZWZhdWx0IHBhbGV0dGUgbWFwcGluZ1xuLy8gVXNlcyBhIHNpbXBsZSBkaXN0YW5jZSBjaGVja1xuZnVuY3Rpb24gZGVmUGFsZXR0ZU1hcChjb2xvciwgcGFsZXR0ZSkge1xuICAgIGxldCBjbG9zZXN0ID0gW107XG4gICAgbGV0IGRNaW4gPSBOdW1iZXIuUE9TSVRJVkVfSU5GSU5JVFk7XG4gICAgcGFsZXR0ZS5kYXRhLmZvckVhY2gocENvbG9yID0+IHtcbiAgICAgICAgY29uc3QgZHNxID0gZGlzdGFuY2UyKGNvbG9yLCBwQ29sb3IpO1xuICAgICAgICBpZiAoZHNxIDw9IGRNaW4pIHtcbiAgICAgICAgICAgIGNsb3Nlc3QgPSBwQ29sb3I7XG4gICAgICAgICAgICBkTWluID0gZHNxO1xuICAgICAgICB9XG4gICAgfSk7XG4gICAgcmV0dXJuIGNsb3Nlc3Q7XG59XG5mdW5jdGlvbiBjbGFtcGVkUkdCUGFsZXR0ZU1hcChjb2xvciwgcGFsZXR0ZSkge1xuICAgIGNvbnN0IGxldmVscyA9IHBhbGV0dGUuZGF0YVswXS5tYXAoYml0cyA9PiBNYXRoLnBvdygyLCBiaXRzKSk7XG4gICAgY29uc3QgY2xhbXBlZCA9IFsuLi5jb2xvcl07XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCAzOyBpKyspIHtcbiAgICAgICAgY29uc3Qgc2VnbWVudCA9IE1hdGguZmxvb3IoY29sb3JbaV0gLyAoMjU2IC8gbGV2ZWxzW2ldKSk7XG4gICAgICAgIGNsYW1wZWRbaV0gPSBzZWdtZW50ICogKDI1NSAvIChsZXZlbHNbaV0gLSAxKSk7XG4gICAgfVxuICAgIHJldHVybiBjbGFtcGVkO1xufVxuZnVuY3Rpb24gcGFsZXR0ZU1hcChjb2xvciwgcGFsZXR0ZSkge1xuICAgIHN3aXRjaCAocGFsZXR0ZS50eXBlKSB7XG4gICAgICAgIGNhc2UgUGFsZXR0ZVR5cGUuUFJHQjpcbiAgICAgICAgICAgIHJldHVybiBjbGFtcGVkUkdCUGFsZXR0ZU1hcChjb2xvciwgcGFsZXR0ZSk7XG4gICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICByZXR1cm4gZGVmUGFsZXR0ZU1hcChjb2xvciwgcGFsZXR0ZSk7XG4gICAgfVxufVxuZXhwb3J0IGZ1bmN0aW9uIGNvbnZlcnRUb1BhbGV0dGUoY3ZJbiwgY3ZPdXQsIHBhbGV0dGUsIGRpdGhlcikge1xuICAgIGN2T3V0LndpZHRoID0gY3ZJbi53aWR0aDtcbiAgICBjdk91dC5oZWlnaHQgPSBjdkluLmhlaWdodDtcbiAgICBjb25zdCBjdHhJbiA9IGN2SW4uZ2V0Q29udGV4dCgnMmQnKTtcbiAgICBpZiAoIWN0eEluKVxuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1VuYWJsZSB0byBnZXQgaW5wdXQgY29udGV4dCcpO1xuICAgIGNvbnN0IGN0eE91dCA9IGN2T3V0LmdldENvbnRleHQoJzJkJyk7XG4gICAgaWYgKCFjdHhPdXQpXG4gICAgICAgIHRocm93IG5ldyBFcnJvcignVW5hYmxlIHRvIGdldCBvdXRwdXQgY29udGV4dCcpO1xuICAgIGNvbnN0IGltYWdlRGF0YSA9IGN0eEluLmdldEltYWdlRGF0YSgwLCAwLCBjdkluLndpZHRoLCBjdkluLmhlaWdodCk7XG4gICAgaWYgKCFpbWFnZURhdGEpXG4gICAgICAgIHRocm93IG5ldyBFcnJvcignVW5hYmxlIHRvIGdldCBpbWFnZSBkYXRhIGZyb20gY29udGV4dCcpO1xuICAgIC8vIFNwZWNpYWwgaGFuZGxpbmcgZm9yIGNlcnRhaW4gcGFsZXR0ZXNcbiAgICBpZiAocGFsZXR0ZS50eXBlID09PSBQYWxldHRlVHlwZS5QQXV0bykge1xuICAgICAgICBjb25zdCBvcHRpb25zID0ge1xuICAgICAgICAgICAgbnVtQ29sb3JzOiBwYWxldHRlLmRhdGFbMF1bMF0sXG4gICAgICAgICAgICByZXNlcnZlZExldmVsOiBwYWxldHRlLmRhdGFbMF1bMV0sXG4gICAgICAgICAgICBsZXZlbHM6IHBhbGV0dGUuZGF0YVswXVsyXSxcbiAgICAgICAgICAgIGluY2xUaHJlc2hvbGRDb2VmZjogcGFsZXR0ZS5kYXRhWzFdWzBdXG4gICAgICAgIH07XG4gICAgICAgIC8vIFJlcGxhY2UgdGhlIFwidGVtcGxhdGVcIiBhdXRvIHBhbGV0dGUgd2l0aCB0aGUgYXBwcm9wcmlhdGVcbiAgICAgICAgLy8gcGFsZXR0ZSBnZW5lcmF0ZWQgZnJvbSB0aGUgaW1hZ2VcbiAgICAgICAgcGFsZXR0ZSA9IGdldFBhbGV0dGUob3B0aW9ucywgaW1hZ2VEYXRhKTtcbiAgICB9XG4gICAgY29uc3Qgc2l6ZSA9IGltYWdlRGF0YS53aWR0aCAqIGltYWdlRGF0YS5oZWlnaHQgKiA0O1xuICAgIGNvbnN0IGxpbmUgPSBpbWFnZURhdGEud2lkdGggKiA0O1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgc2l6ZTsgaSArPSA0KSB7XG4gICAgICAgIGNvbnN0IGNvbG9yID0gQXJyYXkuZnJvbShpbWFnZURhdGEuZGF0YS5zbGljZShpLCBpICsgNCkpO1xuICAgICAgICBjb25zdCBtYXBwZWQgPSBwYWxldHRlTWFwKGNvbG9yLCBwYWxldHRlKTtcbiAgICAgICAgZm9yIChsZXQgaiA9IDA7IGogPCAzOyBqKyspXG4gICAgICAgICAgICBpbWFnZURhdGEuZGF0YVtpICsgal0gPSBtYXBwZWRbal07XG4gICAgICAgIC8vIEFwcGx5IEZsb3lkLVN0ZWluYmVyZyBkaXRoZXJpbmcgaWYgc2VsZWN0ZWRcbiAgICAgICAgaWYgKGRpdGhlciA9PT0gRGl0aGVyU3R5bGUuRmxveWRTdGVpbmJlcmcpIHtcbiAgICAgICAgICAgIGNvbnN0IGVycm9yID0gY29sb3IubWFwKChjaCwgaSkgPT4gY2ggLSBtYXBwZWRbaV0pO1xuICAgICAgICAgICAgZm9yIChsZXQgaiA9IDA7IGogPCAzOyBqKyspIHtcbiAgICAgICAgICAgICAgICBpbWFnZURhdGEuZGF0YVtpICsgNCArIGpdICs9IGVycm9yW2pdICogNyAvIDE2O1xuICAgICAgICAgICAgICAgIGltYWdlRGF0YS5kYXRhW2kgKyBsaW5lIC0gNCArIGpdICs9IGVycm9yW2pdICogMyAvIDE2O1xuICAgICAgICAgICAgICAgIGltYWdlRGF0YS5kYXRhW2kgKyBsaW5lICsgal0gKz0gZXJyb3Jbal0gKiA1IC8gMTY7XG4gICAgICAgICAgICAgICAgaW1hZ2VEYXRhLmRhdGFbaSArIGxpbmUgKyA0ICsgal0gKz0gZXJyb3Jbal0gKiAxIC8gMTY7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgY3R4T3V0ID09PSBudWxsIHx8IGN0eE91dCA9PT0gdm9pZCAwID8gdm9pZCAwIDogY3R4T3V0LnB1dEltYWdlRGF0YShpbWFnZURhdGEsIDAsIDApO1xufVxuZXhwb3J0IGZ1bmN0aW9uIGlzUGFsZXR0ZShlbnRyeSkge1xuICAgIHJldHVybiBlbnRyeS5kYXRhICE9PSB1bmRlZmluZWQ7XG59XG4iXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./src/utils.ts\n");

/***/ })

/******/ 	});
/************************************************************************/
/******/ 	// The module cache
/******/ 	var __webpack_module_cache__ = {};
/******/ 	
/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {
/******/ 		// Check if module is in cache
/******/ 		if(__webpack_module_cache__[moduleId]) {
/******/ 			return __webpack_module_cache__[moduleId].exports;
/******/ 		}
/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = __webpack_module_cache__[moduleId] = {
/******/ 			// no module.id needed
/******/ 			// no module.loaded needed
/******/ 			exports: {}
/******/ 		};
/******/ 	
/******/ 		// Execute the module function
/******/ 		__webpack_modules__[moduleId](module, module.exports, __webpack_require__);
/******/ 	
/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}
/******/ 	
/************************************************************************/
/******/ 	/* webpack/runtime/define property getters */
/******/ 	(() => {
/******/ 		// define getter functions for harmony exports
/******/ 		__webpack_require__.d = (exports, definition) => {
/******/ 			for(var key in definition) {
/******/ 				if(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {
/******/ 					Object.defineProperty(exports, key, { enumerable: true, get: definition[key] });
/******/ 				}
/******/ 			}
/******/ 		};
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/hasOwnProperty shorthand */
/******/ 	(() => {
/******/ 		__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/make namespace object */
/******/ 	(() => {
/******/ 		// define __esModule on exports
/******/ 		__webpack_require__.r = (exports) => {
/******/ 			if(typeof Symbol !== 'undefined' && Symbol.toStringTag) {
/******/ 				Object.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });
/******/ 			}
/******/ 			Object.defineProperty(exports, '__esModule', { value: true });
/******/ 		};
/******/ 	})();
/******/ 	
/************************************************************************/
/******/ 	// startup
/******/ 	// Load entry module
/******/ 	__webpack_require__("./src/index.ts");
/******/ 	// This entry module used 'exports' so it can't be inlined
/******/ })()
;